// https://github.com/g200kg/webaudio-controls/blob/master/webaudio-controls.js
window.WebAudioControlsOptions = {
  useMidi: 1,
  preserveMidiLearn: 1,
};
import "../utils/webaudio-controls.js";
import BufferLoader from "./bufferLoader.js";
import SamplePlayer from "./SamplePlayer.js";
import PresetManager from "./presets.js";
import NoteSet from "./NoteSet.js";
import "./promptWC.js";

const getBaseURL = () => {
  return new URL(".", import.meta.url);
};

// change relative path to absolute path
function changePathToAbsolute(pathArray) {
  // turn these realtive paths into absolute paths
  pathArray = pathArray.map((url) => {
    if (url.startsWith("http")) {
      //console.log("URL is already absolute, doing nothing url = " + url);
      return url;
    }

    //console.log("Changin url = " + url + " to absolute path");
    if (url === "") return url;

    url = getBaseURL() + url;
    //console.log(url);
    return url;
  });
  return pathArray;
}

// This works when you use a bundler such as rollup
// If you do no wan to use a bundler, then  look at other examples
// that build in pure JS the syles and html template directly
// in the code...
let style = `

@import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');

.wrapper {
    position: relative;
    width: 280px;
    height: 50px;
	padding: 0px;
}

.wrapper canvas {
    position: absolute;
    top: 0;
    left: 10px;
}

/* Modifie la taille du waveform */
#myCanvas {
    border: 1px solid black;
    background-color:black;
    z-index:0;
    /* background-color: pink; */
}

#myCanvasOverlay {
    border:1px solid darkgray;
    position: absolute;
    z-index:5;
  }

#myCanvas, #myCanvasOverlay {
	border-radius: 2px;
}

#parameters {
    /* background-color: red; */
    width: 300px;
    height: 350px;
}

#sampler {
	position: relative;
	overflow: hidden;

	display: flex;
    justify-content: left;
    border: 2px solid;

	margin: 20px;
    width: 600px;
    height: 350px;
	background-color: rgba(0, 0, 0, 0.1);
    /* background-color: blue; */

	box-shadow: 10px 10px 5px #888888;	
	border-radius: 10px;
}

#sampler:focus {
	outline: none;
}

#sampler:before {
	content: "";
	position: absolute;
	top: 0;
	left: 0;
	width: 1200px;
	height: 700px;
	/*background image region*/
	background-image:url('data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD/4QDHRXhpZgAASUkqAAgAAAABAA4BAgClAAAAGgAAAAAAAABDYW1vdWZsYWdlIHBhdHRlcm4gYmFja2dyb3VuZC4gQ2xhc3NpYyBjbG90aGluZyBzdHlsZSBtYXNraW5nIGNhbW8gcmVwZWF0IHByaW50LiBGaXJlIG9yYW5nZSBicm93biB5ZWxsb3cgY29sb3JzIGZvcmVzdCB0ZXh0dXJlLiBEZXNpZ24gZWxlbWVudC4gVmVjdG9yIGlsbHVzdHJhdGlvbi7/4QXHaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIj4KCTxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CgkJPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczpJcHRjNHhtcENvcmU9Imh0dHA6Ly9pcHRjLm9yZy9zdGQvSXB0YzR4bXBDb3JlLzEuMC94bWxucy8iICAgeG1sbnM6R2V0dHlJbWFnZXNHSUZUPSJodHRwOi8veG1wLmdldHR5aW1hZ2VzLmNvbS9naWZ0LzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGx1cz0iaHR0cDovL25zLnVzZXBsdXMub3JnL2xkZi94bXAvMS4wLyIgIHhtbG5zOmlwdGNFeHQ9Imh0dHA6Ly9pcHRjLm9yZy9zdGQvSXB0YzR4bXBFeHQvMjAwOC0wMi0yOS8iIHhtbG5zOnhtcFJpZ2h0cz0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3JpZ2h0cy8iIHBob3Rvc2hvcDpDcmVkaXQ9IkdldHR5IEltYWdlcy9pU3RvY2twaG90byIgR2V0dHlJbWFnZXNHSUZUOkFzc2V0SUQ9IjgyODIwOTQ1NiIgeG1wUmlnaHRzOldlYlN0YXRlbWVudD0iaHR0cHM6Ly93d3cuaXN0b2NrcGhvdG8uY29tL2xlZ2FsL2xpY2Vuc2UtYWdyZWVtZW50P3V0bV9tZWRpdW09b3JnYW5pYyZhbXA7dXRtX3NvdXJjZT1nb29nbGUmYW1wO3V0bV9jYW1wYWlnbj1pcHRjdXJsIiA+CjxkYzpjcmVhdG9yPjxyZGY6U2VxPjxyZGY6bGk+THVwYXNjb1JvbWFuPC9yZGY6bGk+PC9yZGY6U2VxPjwvZGM6Y3JlYXRvcj48ZGM6ZGVzY3JpcHRpb24+PHJkZjpBbHQ+PHJkZjpsaSB4bWw6bGFuZz0ieC1kZWZhdWx0Ij5DYW1vdWZsYWdlIHBhdHRlcm4gYmFja2dyb3VuZC4gQ2xhc3NpYyBjbG90aGluZyBzdHlsZSBtYXNraW5nIGNhbW8gcmVwZWF0IHByaW50LiBGaXJlIG9yYW5nZSBicm93biB5ZWxsb3cgY29sb3JzIGZvcmVzdCB0ZXh0dXJlLiBEZXNpZ24gZWxlbWVudC4gVmVjdG9yIGlsbHVzdHJhdGlvbi48L3JkZjpsaT48L3JkZjpBbHQ+PC9kYzpkZXNjcmlwdGlvbj4KPHBsdXM6TGljZW5zb3I+PHJkZjpTZXE+PHJkZjpsaSByZGY6cGFyc2VUeXBlPSdSZXNvdXJjZSc+PHBsdXM6TGljZW5zb3JVUkw+aHR0cHM6Ly93d3cuaXN0b2NrcGhvdG8uY29tL3Bob3RvL2xpY2Vuc2UtZ204MjgyMDk0NTYtP3V0bV9tZWRpdW09b3JnYW5pYyZhbXA7dXRtX3NvdXJjZT1nb29nbGUmYW1wO3V0bV9jYW1wYWlnbj1pcHRjdXJsPC9wbHVzOkxpY2Vuc29yVVJMPjwvcmRmOmxpPjwvcmRmOlNlcT48L3BsdXM6TGljZW5zb3I+CgkJPC9yZGY6RGVzY3JpcHRpb24+Cgk8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJ3Ij8+Cv/tAPRQaG90b3Nob3AgMy4wADhCSU0EBAAAAAAA2BwCUAAMTHVwYXNjb1JvbWFuHAJ4AKVDYW1vdWZsYWdlIHBhdHRlcm4gYmFja2dyb3VuZC4gQ2xhc3NpYyBjbG90aGlu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kkjJKpAkkkkkkkhJIkJJJJZJKZJJJJD0kkNfUkkkkpJlikkkkkkklPBhspJJJpFpJJJJJOkksqkktqknpCx22mkkkrsdtttpJJBssdJJI81d0kks6rb8ClD7JJJI2klzIXtttttIpttJJJIAUkknk9ttttsyJJM6aa9kkfJXttttthpttpJSkpIUktJHtttttsVJJJJZJJCJJ3tttttttttpJjJJJKkkJJHdttttsxJFJJJJJJINtttttttttgB5JJJJEl7JJBdttttszQ45GDiBA5ttttttAJkpPJJJJJJ9FBy2bnl9tnEttgp9tttttttsFpJJJJLJJJJNN5Jw0kn26MljpDtttttttttsJJJJJJJJIc2JJR0hoOlskkNpJ85J3thpENtttoJpMpJJJJJAEl4Ekkufbs4C9qZJJJJ9tpJBNtspJNlsJJJJJJOkkkkkklftttt55I65JOthJJFJghJJJpn5JJJJKEkkkkkkltttspJIRmHJOVpJJIJJJJJKUrJJJJIUkkkkkkkXtttfJ4rtt3JNtJJJJJJJJI0kDJJJDEkkkkkkklNttszHtttsZJJJJJJJJJJJGkkJJJP0kkkkkkkklY9tttttttM/JpJJJJJJJJD0knJJJAEkkkklX0kknn7ttttthIndJJJJJJJJJGkkvJJJEkkkkktMHV+ZI9tttttJJJJJJJJJJJJJYkko5IwkkkkkkpJJJJIhtttttpJJKpuZJJJMNJJGElQzSkkkkkkkpJJHxRtttttshJJm3shpNostJJEExEkkkkkl4zLJJNNtttttttsIFttttoBtttJJJJsokklFgkJJJJJFNttttttiTGzI9tttttpBpJthpsiUklJDlIZLY4u+A7IW1e8aSZf/APbbbbKSSRbbbbbJKySSSLSSTGSSSSI+yBpJJJJDjbbbbaSSTYLbbZJfDySOSSSTyQBmZpfbpJJJJJP7bbbbIASYQbbPJLpcmSySSSGcySnpJJJJJItJEbbbbbbbQKSTBQpJJJKmUrSSSSSSTSJHG1pKiXh7bbbbbbbbYQSSNJJJJJySFSSSSSSSLUySZJUbbbba7bbbbbbbBMpJJJJJKKSGSSSSSSQmSTiJJHbZM5XbbbbbbbbZJJJJJJJKSSSSSSCmySSST9JLZrJJJVbLbbbbbbBJJJJJJJBSWSSSTyMZrSSKnpJJ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');
	//background-color: #4b7338;
	opacity: 1;
	background-size: 50% 50%;
	background-repeat: repeat;
	
	z-index: -1;
	animation: move 30s infinite linear;
}
  
@keyframes move {
	0% {
		transform: translate(0%, 0%);
	}
	100% {
		transform: translate(-50%, -50%);
	}
}
  

#waveform {
	height: 90px;
	width: 300px;
	/* background-color: green; */
}

/* Label soundname */
#soundName {
    width: 280px;
    height: 20px;
	padding: 10px;
    margin: 0px;
    font-size: 20px;
    font-weight: bold;
    text-align: center;
	color: white;
	text-shadow: 0px 0px 1px black;
	font-weight: bold;
	overflow-x: scroll;
	/*overflow: hidden;*/
	-ms-overflow-style: none;  /* IE and Edge */
	scrollbar-width: none;  /* Firefox */
	&::-webkit-scrollbar { /* Chrome, Safari, Opera */
		display: none;
	}
	/*text-overflow: ellipsis;*/
	white-space: nowrap;
    /* background-color: yellow; */
}

#labelSampleName {
	display: inline-block;
    width: 200px;
    height: 20px;
	padding: 2px;
    margin: 0px;
    font-size: 18px;
    font-weight: bold;
    text-align: center;
	color: white;
	text-shadow: 0px 0px 1px black;
	font-weight: bold;
	overflow-x: scroll;
	/*overflow: hidden;*/
	-ms-overflow-style: none;  /* IE and Edge */
	scrollbar-width: none;  /* Firefox */
	&::-webkit-scrollbar { /* Chrome, Safari, Opera */
		display: none;
	}
	/*text-overflow: ellipsis;*/
	white-space: nowrap;
	cursor: pointer;
    /* background-color: yellow; */
}

#labelSampleName, #inputSampleName, #choiceExplorer, #choiceKnobs, #choiseMIDI {
	font-family: 'Share Tech Mono', monospace;
}

button {
	cursor: pointer;
	transform: scale(1);
	transform-origin: center;
}

button:hover {
	background-color: #E9E9F0;
	transform: scale(1.02);
}

#enableVelocity:hover {
	background-color: orange;
}

button:active {
	transform: scale(0.97);
}

select:hover {
	background-color: #E9E9F0;
	transform: scale(1.005);
}

.presetClass, .researchClass, .effectClass, .noteSetClass, .midiClassBtn{
	font-family: 'Share Tech Mono', monospace;
	border-radius: 8px;
	cursor: pointer;
	text-align: center;
}

.presetClass, .researchClass, .noteSetClass, .midiClassBtn{
	border: 1px solid black;
}

.noteSet{
	display: flex;
	gap: 2px;
	margin-top: 3px;
}

.effectClass {
	font-size: 10px;
}
.adsrClass {
	font-size: 12px;
	font-family: 'Share Tech Mono', monospace;
	
}

#inputSampleName {
	display: none;
	height: 20px;
}

/*
::-webkit-scrollbar {
	display: none;
  }
*/
#presets {
    /* background-color: lightgreen; */
    padding: 10px;
	padding-top : 6px;
    width: 280px;
	height: 50px;
	overflow: hidden;
	display: flex;
	flex-wrap: wrap;
	justify-content: center;
	gap: 1px;
	
}

#selectPreset {
	width: 280px;
	height: 16px;
	font-size: 10px;
	padding: 0px;
	margin: 0px;
	margin-bottom: 1px;
	border: 1px solid black;
}

#createPreset, #deletePreset, #savePreset {
	width: 90px;
	height: 20px;
	font-size: 10px;
	padding: 0px;
	margin: 0px;
}

#createNoteSet {
	width: 120px;
	height: 18px;
	font-size: 10px;
}

#selectNoteSet {
	width: 150px;
    height: 18px;
    font-size: 10px;
	border: 1px solid black;
}

#matrix {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: repeat(4, 1fr);
    gap: 5px;
    width: 280px;
    height: 330px;
    padding: 10px;
    /* background-color: yellow; */
}

.deleteSample {
	width: 10px;
	height: 10px;
	font-size: 8px;
	font-weight: bold;
	padding: 0px;
	margin: 0px;
	color: red;
	background-color: transparent;
	border: none;
	position: absolute;
	top: -2px;
	left: 40px;
	z-index: 2;
}
.padDiv {
	width: 66.25px;
	height: 75px;
	position: relative;
	display: flex;
	flex-direction: column;
}

.padbutton {
    width: 66.25px;
    height: 66.25px;
	padding : 0px;
    border: 2px solid #888888;
	border-top: none;
	border-bottom-width: revert;
	outline: none;
    background-color: #ccc;
    cursor: pointer;
    font-size: 10px;
	border-radius: 12px;
	box-shadow: -2px -6px 11px #A8FFBA, -2px -3px 5px #F6ECEB, -6px 0px 10px #F6ECEB, 2px 6px 11px #F6ECEB rgba(0, 0, 0, 0.2);
	justify-content: center;
	align-items: center;
	position: relative;
	cursor: pointer;
	color: transparent;

	font-family: 'Share Tech Mono', monospace;
}

.switchpad {
	width: 66.25px;
	height: 66.25px;
}

.button_text {
	font-size: 10px;
	transition: 0.13s ease-in-out;
	position: relative;
	transform: translate3d(0px, -4px, 0px);
	margin: 0px;
	padding: 0px;
	overflow: hidden;
	text-overflow: ellipsis;
	display: -webkit-box;
    -webkit-line-clamp: 3; /* number of lines to show */
    line-clamp: 3;
	-webkit-box-orient: vertical;
	overflow-wrap: break-word;
	color: black;
	text-align: center;
	font-family: 'Share Tech Mono', monospace;
}

.button_key_text {
	position: absolute;
	left: 0px;
	bottom: 0px;
	font-size: 8px;
	color: black;
}

.button_midi_note {
	position: absolute;
	left: 0px;
	top: 0px;
	font-size: 8px;
	color: black;
}


.padactionbutton {
    font-family: courier;
    font-size: 8px;
}

.padprogress {
    width: 100%;
    height: 7px;
}

.set {
	background-color: lightgreen;
}

.active {
	border: 1px solid darkred;
	background-color: red;
}

.active {
	box-shadow: none;
}

.active .button_text {
	transform: translate3d(0px, 0px, -20px);
}

.padbutton:active {
	background-color: red;
}

.padbutton:active{
	box-shadow: none;
}

.padbutton:active .button_text {
	transform: translate3d(0px, 0px, -20px);
}

.selected {
	box-shadow: 1px 1px 1px red, -1px -1px 1px red, 1px -1px 1px red, -1px 1px 1px red;
}

#choice{
	width: 280px;
	height: 180px;
	padding: 10px;
	padding-top: 2px;
	
}

#choiceKnobs, #choiceExplorer, #choiceMIDI {
	margin-bottom: 8px;
	justify-content: center;
	align-items: center;
	width: 90px;
	height: 15px;
	font-size: 10px;
	border: 1px solid black;
	border-radius: 10px;
	font-family: 'Share Tech Mono', monospace;
}


#explorer {
	font-size: 0px;
	display: inline-block;
	width: 280px;
	height: 160px;
	margin-bottom: 2px;
	color: white;
	text-shadow: 0px 0px 1px black;
}

#research {
	display: flex;
	width: 280px;
	height: 15px;
	font-size: 10px;
	margin-bottom: 5px;
    justify-content: center;
	align-items: center;
}

#freesoundAPI {
	display: flex;
	width: 280px;
	height: 15px;
	font-size: 10px;
	margin-bottom: 5px;
    justify-content: center;
	align-items: center;
}

#apiKey {
	box-sizing: border-box;
	width: 170px;
	height: 15px;
	font-size: 10px;
	padding: 0px;
	margin: 0px;
	& option {
		font-size: 10px;
	}
	-webkit-text-security: disc; /* pour les navigateurs basés sur WebKit */
	-moz-text-security: disc; /* pour les navigateurs basés sur Mozilla */
	text-security: disc; /* pour les autres navigateurs */
}

#apiKeyButton {
	height: 15px;
	width: 28px;
	font-size: 10px;
	padding: 0px;
	margin-right: 5px;
	justify-content: center;
	align-items: center;
}

#apiKeyButton.saved {
	border: 1px solid green;
	border-radius: 2px;
	background-color: lightgreen;
}


#search {
	box-sizing: border-box;
	width: 90px;
	height: 15px;
	font-size: 10px;
	padding: 0px;
	margin: 0px;
	& option {
		font-size: 10px;
	}
}

#searchButton {
	width: 60px;
	height: 15px;
	font-size: 10px;
	padding: 0px;
	margin-right: 5px;
	display: flex;
	justify-content: center;
	align-items: center;
	border: 2px solid green;
	border-radius: 3px;
}

.error {
	border: 1px solid darkred;
	border-radius: 2px;
	background-color: red;
}

#timeRange {
	width: 50px;
	height: 15px;
	font-size: 10px;
	padding: 0px;
	margin-right: 5px;
}

#results {
	width: 280px;
	height: 110px;
	margin-bottom: 5px;
	display: inline-block;
	overflow-y: scroll;
	-ms-overflow-style: none;  /* IE and Edge */
	scrollbar-width: none;  /* Firefox */
	&::-webkit-scrollbar { /* Chrome, Safari, Opera */
		display: none;
	}
	border-radius: 10px;
}

#results.error {
	border: 1px solid darkred;
	background-color: rgba(255, 0, 0, 0.5);
	color: white;
	text-shadow: 0px 0px 1px black;
	font-size: 12px;
	text-align: center;
	justify-content: center;
	align-items: center;
	display: flex;
}

#nextPage, #previousPage {
	width: 25px;
	height: 15px;
	font-size: 10px;
	padding: 0px;
	margin: 0px;
}

.resultExplorer {
	display: inline-block;
	width: 90px;
	height: 33px;
	margin-right: 1.5px;
	margin-left: 1.5px;
	margin-bottom: 5px;
}

.resultButton {
	width: 90px;
	height: 26px;
	margin-top: 3px;
	font-size: 10px;
	white-space: normal;
	overflow: hidden;
	text-overflow: ellipsis;
	justify-content: center;
	align-items: center;
	border-radius: 10px;
    border: 1px solid black;
    background-color: #ccc;
    color: black;
    cursor: pointer;
	box-shadow: none;
	position: relative;
}

button, select, input {
	&:focus {
		outline: none;
	}
}


.choiceBtn:hover {
	background-color: orange;
}


option {
	text-align: center;
	overflow: hidden;
}

.resultButton.set {
	border: 1px solid green;
	background-color: lightgreen;
}

.resultButton.active {
	background-color: red;
	border: 1px solid darkred;
}

.resultButton.selected {
	border: 1px solid darkred;
	box-shadow: 1px 1px 1px red, -1px -1px 1px red, 1px -1px 1px red, -1px 1px 1px red;
}

.progressExplorer {
	margin-top: 1px;
	width: 100%;
	height: 5px;
}

#MIDI {
	display : flex;
	flex-direction: row;
	align-content: flex-start;
	justify-content: center;
	gap: 10px;
	flex-wrap: wrap;
	width: 280px;
	height: 160px;
	padding-bottom: 10px;
	color: white;
	text-shadow: 0px 0px 1px black;
}

#MIDI h1 {
	text-align: center;
}

.midiClassBtn {
	width: 80px;
	height: 50px;
	font-size: 10px;
}

.midiClassBtn:active {
	border: none;
	background-color: orange;
}

.midiClassBtn:hover, #reverse:hover, #envBtn:hover{
	background-color: orange;
}



#knobs {
	display: grid;
	justify-content: center;
	justify-items: center;
	align-items: center;
	width: 280px;
	height: 160px;
	padding-bottom: 10px;
	grid-template-columns: repeat(5, 1fr);
	grid-template-rows: repeat(3, 1fr);
	gap: 5px;
}

.knob {
	display: flex;
	flex-direction: column;
	justify-content: center;
	justify-items: center;
    align-items: center;
	width: 50px;
	height: 50px;
}

.knob label {
	text-align: center;
	color: white;
	text-shadow: 0px 0px 1px black;
	font-size: 13px;
}

.knobEnv {
	display: flex;
	flex-direction: column;
	justify-content: center;
	justify-items: center;
    align-items: center;
	width: 50px;
	height: 50px;
}

.knobEnv label {
	text-align: center;
	color: white;
	text-shadow: 0px 0px 1px black;
}

#reverse {
	width: 50px;
	height: 20px;
	font-size: 10px;
	display: flex;
	justify-content: center;
	align-items: center;
	border-radius: 10px;
	border: none;
	color: black;
	cursor: pointer;
	box-shadow: none;
	position: relative;
}

#envBtn{
	width: 50px;
	height: 20px;
	font-size: 10px;
	justify-content: center;
	align-items: center;
	border-radius: 10px;
	border: none;
	color: black;
	cursor: pointer;
	box-shadow: none;
	position: relative;
}

.choose {
	background-color: orange;
	border: 1px solid red;
}

.element-disabled{
	pointer-events: none;
	opacity: 0.5;
	transform: scale(1);
}

#formHelp {
	position: absolute;
	padding: 2px;
	right: 3px;
}
#formHelp button {
	font-size: 10px;
	cursor: pointer;
	border-radius : 5px;
	font-family: 'Share Tech Mono', monospace;
}
#formHelp button:hover {
	background-color: #DDDCE3;
}
`;

let template = `
<div id="sampler" tabindex="0">
	
	<div id="matrix">
		<div id="p12" class="padDiv">
			<webaudio-switch id="switchpad12"  draggable=true midilearn="true" class="switchpad" type="kick" width=66.25 height=66.25 src="./pad.png" >
			</webaudio-switch>
			<progress class="padprogress" id="progress12" max="10" value="0"></progress>
		</div>
		<div id="p13" class="padDiv">
			<webaudio-switch id="switchpad13"  draggable=true midilearn="true" class="switchpad" type="kick" width=66.25 height=66.25 src="./pad.png" >
			</webaudio-switch>
			<progress class="padprogress" id="progress13" max="10" value="0"></progress>
		</div>
		<div id="p14" class="padDiv">
			<webaudio-switch id="switchpad14"  draggable=true midilearn="true" class="switchpad" type="kick" width=66.25 height=66.25 src="./pad.png" >
			</webaudio-switch>
			<progress class="padprogress" id="progress14" max="10" value="0"></progress>
		</div>
		<div id="p15" class="padDiv">
			<webaudio-switch id="switchpad15"  draggable=true midilearn="true" class="switchpad" type="kick" width=66.25 height=66.25 src="./pad.png" >
				<div class="button_key_text">2</div>
			</webaudio-switch>
			<progress class="padprogress" id="progress15" max="10" value="0"></progress>
		</div>
		<div id="p8" class="padDiv">
			<webaudio-switch id="switchpad8"  draggable=true midilearn="true" class="switchpad" type="kick" width=66.25 height=66.25 src="./pad.png" >
			</webaudio-switch>
			<progress class="padprogress" id="progress8" max="10" value="0"></progress>
		</div>
		<div id="p9" class="padDiv">
			<webaudio-switch id="switchpad9"  draggable=true midilearn="true" class="switchpad" type="kick" width=66.25 height=66.25 src="./pad.png" >
			</webaudio-switch>
			<progress class="padprogress" id="progress9" max="10" value="0"></progress>
		</div>
		<div id="p10" class="padDiv">
			<webaudio-switch id="switchpad10"  draggable=true midilearn="true" class="switchpad" type="kick" width=66.25 height=66.25 src="./pad.png" >
			</webaudio-switch>
			<progress class="padprogress" id="progress10" max="10" value="0"></progress>
		</div>
		<div id="p11" class="padDiv">
			<webaudio-switch id="switchpad11"  draggable=true midilearn="true" class="switchpad" type="kick" width=66.25 height=66.25 src="./pad.png" >
			</webaudio-switch>
			<progress class="padprogress" id="progress11" max="10" value="0"></progress>
		</div>
		<div id="p4" class="padDiv">
			<webaudio-switch id="switchpad4" draggable=true midilearn="true" class="switchpad" type="kick" width=66.25 height=66.25 src="./pad.png" >
			</webaudio-switch>
			<progress class="padprogress" id="progress4" max="10" value="0"></progress>
		</div>
		<div id="p5" class="padDiv">
			<webaudio-switch id="switchpad5" draggable=true midilearn="true" class="switchpad" type="kick" width=66.25 height=66.25 src="./pad.png" >
			</webaudio-switch>
			<progress class="padprogress" id="progress5" max="10" value="0"></progress>
		</div>
		<div id="p6" class="padDiv">
			<webaudio-switch id="switchpad6" draggable=true  midilearn="true" class="switchpad" type="kick" width=66.25 height=66.25 src="./pad.png" >
			</webaudio-switch>
			<progress class="padprogress" id="progress6" max="10" value="0"></progress>
		</div>
		<div id="p7" class="padDiv">
			<webaudio-switch id="switchpad7" draggable=true midilearn="true" class="switchpad" type="kick" width=66.25 height=66.25 src="./pad.png" >
			</webaudio-switch>
			<progress class="padprogress" id="progress7" max="10" value="0"></progress>
		</div>
		<div id="p0" class="padDiv">
			<webaudio-switch id="switchpad0" draggable=true midilearn="true" class="switchpad" type="kick" width=66.25 height=66.25 src="./pad.png" >
				<div class="button_key_text">W</div>
			</webaudio-switch>
			<progress class="padprogress" id="progress0" max="10" value="0"></progress>
		</div>
		<div id="p1" class="padDiv">
			<webaudio-switch id="switchpad1"  draggable=true midilearn="true" class="switchpad" type="kick" width=66.25 height=66.25 src="./pad.png" >
			</webaudio-switch>
			<progress class="padprogress" id="progress1" max="10" value="0"></progress>
		</div>
		<div id="p2" class="padDiv">
			<webaudio-switch id="switchpad2"  draggable=true midilearn="true" class="switchpad" type="kick" width=66.25 height=66.25 src="./pad.png" >
			</webaudio-switch>
			<progress class="padprogress" id="progress2" max="10" value="0"></progress>
		</div>
		<div id="p3" class="padDiv">
			<webaudio-switch id="switchpad3"  draggable=true midilearn="true" class="switchpad" type="kick" width=66.25 height=66.25 src="./pad.png" >
			</webaudio-switch>
			<progress class="padprogress" id="progress3" max="10" value="0"></progress>
		</div>	  
	</div>

	<div id ='parameters'>

		<div id="waveform">
			<div id="soundNameContainer">
				<form id="formHelp" action="https://github.com/quentinplet/Sampler-WAM.git" target="_blank">
					<button type="submit">About</button>
		  		</form>
				<p id="soundName">
				<label id="labelSampleName">Waveform</label>
				<input type="text" id="inputSampleName" value="Waveform">
				</p>
			</div>	
			<div class="wrapper">
				<canvas id="myCanvas" width=280 height=50></canvas>
				<canvas id="myCanvasOverlay" width=280 height=50></canvas>
			</div>
		</div>

		<div id="presets">
			<select id="selectPreset" class="presetClass">
			</select>
			<!-- <button id="newPreset" class="presetClass">New preset</button> -->
			<button id="createPreset" class="presetClass">Create preset</button>
			<button id="savePreset" class="presetClass">Save preset</button>
			<button id="deletePreset" class="presetClass">Delete preset</button>
			<div class="noteSet">
				<select name="createScale" id="selectNoteSet" class="noteSetClass">Select Scale
				<option value="">--Select a scale--</option>
				</select>
				<button id="createNoteSet" class="noteSetClass">Create Note Set</button>
			</div>
		</div>

		<div id="choice">
			<button class="choiceBtn" id="choiceExplorer">Freesound</button>
			<button class="choiceBtn" id="choiceKnobs">Effects</button>
			<button class="choiceBtn" id="choiceMIDI">Midi/Keyboard</button>

			<div id="knobs">
				<div class="knob" id="volumeGain">
					<webaudio-knob colors="#fc0;#000;#444" id="knob1"  class="effectClass" height="30" width="30" sprites="100" min="0" max="1" step="0.01" value="0.5" midilearn=true tooltip="Volume %.2f"></webaudio-knob>
					<label for="knob1" class="effectClass">Volume</label>
				</div>
				<div class="knob" id="pan">
					<webaudio-knob colors="#fc0;#000;#444"  id="knob2"  class="effectClass" height="30" width="30" sprites="100" min="-1" max="1" step="0.01" value="0" midilearn="1" tooltip="Pan %.2f"></webaudio-knob>
					<label for="knob2" class="effectClass">Pan</label>
				</div>
				<div class="knob" id="tone">
					<webaudio-knob colors="#fc0;#000;#444" id="knob3"  class="effectClass" height="30" width="30" sprites="100" min="-1" max="1" step="0.01" value="0" midilearn="1" tooltip="Tone %.2f"></webaudio-knob>
					<label for="knob3" class="effectClass">Tone</label>
				</div>
				<div class="knob" id="pitch">
					<webaudio-knob colors="#fc0;#000;#444" id="knobPitch"  class="effectClass" height="30" width="30" sprites="100" min="-24" max="24" step="1" value="0" midilearn="1" tooltip="Pitch %.2f"></webaudio-knob>
					<label for="knob3" class="effectClass">Pitch</label>
				</div>
				<div>
					<button id="reverse" class="effectClass" >Reverse</button>
				</div>
				<div class="knobEnv" id="adsrAttack">
					<webaudio-knob colors="#fc0;#000;#444" id="knobAttack" height="30" width="30" sprites="100" min="0" max="1" step="0.01" value="0.2" midilearn="1" tooltip="Attack %.2f"></webaudio-knob>
					<label for="knobAttack" class="adsrClass">Attack</label>
				</div>
				<div class="knobEnv" id="adsrDecay">
					<webaudio-knob colors="#fc0;#000;#444" id="knobDecay" height="30" width="30" sprites="100" min="0" max="1" step="0.01" value="0.2" midilearn="1" tooltip="Decay %.2f"></webaudio-knob>
					<label for="knobDecay" class="adsrClass">Decay</label>
				</div>
				<div class="knobEnv" id="adsrSustain">
				<webaudio-knob colors="#fc0;#000;#444" id="knobSustain" height="30" width="30" sprites="100" min="0" max="1" step="0.01" value="0.5" midilearn="1" tooltip="Sustain %.2f"></webaudio-knob>
				<label for="knobSustain" class="adsrClass">Sustain</label>
				</div>
				<div class="knobEnv" id="adsrRelease">
				<webaudio-knob colors="#fc0;#000;#444" id="knobRelease" height="30" width="30" sprites="100" min="0" max="1" step="0.01" value="0.3" midilearn="1" tooltip="Release %.2f"></webaudio-knob>
				<label for="knobRelease" class="adsrClass">Release</label>
				</div>
				<div>
				<button id="envBtn" class="effectClass">Enable</button>
				</div>				
			</div>

			<div id="explorer">
				<div id="freesoundAPI">
					<input type="text" id="apiKey" name="apiKey" placeholder="Enter your freesound API key">
					<button id="apiKeyButton">Save</button>
				</div>
				<div id="research">
					<input type="text" id="search" name="search" placeholder="Freesound">
					<select id="timeRange" class="researchClass"></select>
					<button id="searchButton" class="researchClass">Search</button>
					<button id="previousPage"><<</button>
					<button id="nextPage">>></button>
				</div>
			
				<div id="results">
				</div>
			</div>

			<div id="MIDI">
				<button id="defaultMidiLearn" class="midiClassBtn">Default Midi Mapping</button>
				<button id="clearMidiLearn" class="midiClassBtn">Clear all Midi Mapping</button>
				<button id="resetMidiLearn" class="midiClassBtn">Reset Midi Mapping</button>
				<button id="enableVelocity" class="midiClassBtn">Velocity off</button>
				<button id="enableKeyboard" class="midiClassBtn">Keyboard off</button>
			</div>
		</div>
	</div>
</div>
`;

export class MIDI {
  static NOTE_ON = 0x90;
  static NOTE_OFF = 0x80;
  static CC = 0xb0;
}

// The GUI is a WebComponent. Not mandatory but useful.
// MANDORY : the GUI should be a DOM node. WebComponents are
// practical as they encapsulate everyhing in a shadow dom
export default class SamplerHTMLElement extends HTMLElement {
  // plugin = the same that is passed in the DSP part. It's the instance
  // of the class that extends WebAudioModule. It's an Observable plugin

  static URLs = [];
  static name = [];
  static defaultName = [];

  constructor(plugin) {
    super();
    // SamplerHTMLElement.factoryPreset1URIs = changePathToAbsolute(SamplerHTMLElement.factoryPreset1URIs);
    this.root = this.attachShadow({ mode: "open" });
    this.root.innerHTML = `<style>${style}</style>${template}`;

    // MANDATORY for the GUI to observe the plugin state
    this.plugin = plugin;

    this.plugin.audioNode.gui = this;

    //set control bindings for midi
    this.controlBindings = new Map();

    this.controlBindings.set("volume", 176);
    this.controlBindings.set("pan", 177);
    this.controlBindings.set("tone", 178);
    this.controlBindings.set("pitch", 179);

    //ADSR
    this.controlBindings.set("attack", 180);
    this.controlBindings.set("decay", 181);
    this.controlBindings.set("sustain", 182);
    this.controlBindings.set("release", 183);

    //i have the key i want to log the value of

    // apiKey BUFFA :
    //this.apiKey = 'gWrbi0mUOoh7gaZgxp1Eh5rXB1hZ4UKZ2AnV8nqo';
    // apiKey BOUCLIER :
    //this.apiKey = 'oDL2Gdd0IksB30fuYIPsb3FCAjkhgNb2Vyw2bENg';

    this.apiKey = "";

    this.apiUrl = "https://freesound.org/apiv2";

    // this.setupMidiListeners(this.plugin.audioNode);

    this.samplePlayers = [];

    this.explorerSamplePlayers = [];

    this.mousePos = { x: 0, y: 0 };

    this.enableVelocity = false;

    //By default the keyboard touch for typing is enabled
    this.enableKeyboard = true;
    this.enableKeyboardPlay = false;

    // If the prompt menu is no available
    this.promptAvailable = false;

    /*
		console.log("getBaseURL : " + getBaseURL());
		//this.backgroundImageURL = 	getBaseURL() + "./Gui/imgOrange.jpg";
		this.backgroundImageURL = getBaseURL() + "./imgOrange.jpg"
		console.log("this.backgroundImageURL : " + this.backgroundImageURL);
		*/
  }

  handleAnimationFrame = () => {
    if (this.player) {
      this.player.drawOverlays();
    }
    window.requestAnimationFrame(this.handleAnimationFrame);
  };

  connectedCallback() {
    this.setupMidiListeners(this.plugin.audioNode);
    // get the canvas for the waveform
    this.canvas = this.shadowRoot.querySelector("#myCanvas");
    this.canvasOverlay = this.shadowRoot.querySelector("#myCanvasOverlay");
    // get the canvas context
    this.canvasContext = this.canvas.getContext("2d");
    this.canvasContextOverlay = this.canvasOverlay.getContext("2d");

    // add listeners on choiceButtons
    this.setChoiceButtons();

    // add listeners on knobs effects
    this.setKnobs();

    // add listeners on the freesound Explorer
    this.setExplorer();

    // add listeners on the input of ApiKey
    this.setApiKey();

    // add drag and drop for switchpads
    this.setAllDragAndDrop();

    // add listeners on the select presets
    this.setPreset();

    // add listeners on the canvas
    this.addCanvasListeners();

    // add listeners on the keyboard for playing pads
    this.setKeyboardPress();

    // Set background image style to #sampler html element
    //this.setSamplerBackgroundImage();

    // set relative urls to absolute for webaudiocontrol spritesheet images
    this.setWebAudioControlSpritesheetImages();

    //update Midi Note Value on GUI
    this.updateMidiNoteValue();

    this.setVelocity();
  }

  setWebAudioControlSpritesheetImages() {
    let switches = this.shadowRoot.querySelectorAll(".switchpad");
    switches.forEach((pad) => {
      let imgUrl = pad.getAttribute("src");
      // change pad.src to absolute
      const absoluteURL = getBaseURL() + imgUrl;
      //#region const imgBase64
      const imgBase64 =
        "data:image/png;base64,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";
      //#endregion
      pad.setAttribute("src", imgBase64);
    });
  }

  setSamplerBackgroundImage() {
    let samplerDiv = this.shadowRoot.querySelector("#sampler");
    samplerDiv.style.backgroundImage = "url(" + this.backgroundImageURL + ")";
    //samplerDiv.style.background = "red";

    console.log(
      "samplerDiv.style.backgroundImage : " + samplerDiv.style.backgroundImage
    );
  }

  addCanvasListeners() {
    this.canvasOverlay.onmousemove = (evt) => {
      let rect = this.canvas.getBoundingClientRect();

      this.mousePos.x = evt.clientX - rect.left;
      this.mousePos.y = evt.clientY - rect.top;

      if (this.player) {
        this.player.highLightTrimBarsWhenClose(this.mousePos);
      }
    };

    this.canvasOverlay.onmousedown = (evt) => {
      if (this.player) {
        this.player.selectTrimbars();
      }
    };

    this.canvasOverlay.onmouseup = (evt) => {
      if (this.player) {
        this.player.releaseTrimBars();
      }
    };

    this.canvasOverlay.onmouseout = (evt) => {
      if (this.player) {
        this.player.releaseTrimBarsOnMouseOut();
      }
    };
  }

  setKnobs() {
    const effectKnobs = this.shadowRoot.querySelectorAll(".knob");
    effectKnobs.forEach((effectKnob) => {
      effectKnob.classList.add("element-disabled");
    });

    this.shadowRoot.querySelector("#knob1").addEventListener("input", (e) => {
      //this.plugin.audioNode.setParamsValues({ volumeGain: e.target.value });

      if (this.player == undefined) return;

      this.player.effects.volumeGain = parseFloat(e.target.value);
    });

    this.shadowRoot.querySelector("#knob2").addEventListener("input", (e) => {
      //this.plugin.audioNode.setParamsValues({ pan: e.target.value });

      if (this.player == undefined) return;

      this.player.effects.pan = parseFloat(e.target.value);
    });

    this.shadowRoot.querySelector("#knob3").addEventListener("input", (e) => {
      //this.plugin.audioNode.setParamsValues({ tone: e.target.value });

      if (this.player == undefined) return;

      this.player.effects.tone = parseFloat(e.target.value);
    });

    this.shadowRoot
      .querySelector("#knobPitch")
      .addEventListener("input", (e) => {
        if (this.player == undefined) return;
        this.player.semitones = parseInt(e.target.value);
      });

    //button reverse
    const btnReverse = this.shadowRoot.querySelector("#reverse");
    btnReverse.disabled = true;
    btnReverse.classList.add("element-disabled");
    btnReverse.addEventListener("click", (e) => {
      if (this.player == undefined) return;

      const reverseSoundBuffer = this.player.reverseSound(
        this.player.decodedSound
      );
      this.player.reversed = !this.player.reversed;

      this.player.decodedSound = reverseSoundBuffer;
      this.player.drawWaveform();

      this.player.reversed
        ? btnReverse.classList.add("choose")
        : btnReverse.classList.remove("choose");
    });

    //ADSR enveloppe

    //enable ADSR;
    const envBtn = this.shadowRoot.querySelector("#envBtn");
    const envKnobs = this.shadowRoot.querySelectorAll(".knobEnv");
    //disable all knobs
    envKnobs.forEach((envKnob) => {
      envKnob.classList.add("element-disabled");
    });
    envBtn.disabled = true;
    envBtn.classList.add("element-disabled");
    envBtn.addEventListener("click", (e) => {
      if (this.player == undefined) return;
      if (!this.player.enableAdsr) {
        envBtn.innerHTML = "Disable";
        this.player.enableAdsr = true;
        envBtn.classList.add("choose");
        envKnobs.forEach((envKnob) => {
          envKnob.classList.remove("element-disabled");
        });
      } else {
        envBtn.innerHTML = "Enable";
        this.player.enableAdsr = false;
        envBtn.classList.remove("choose");
        envKnobs.forEach((envKnob) => {
          envKnob.classList.add("element-disabled");
        });
      }
    });

    //attack
    this.shadowRoot
      .querySelector("#knobAttack")
      .addEventListener("input", (e) => {
        if (this.player == undefined) return;
        this.player.effects.attackValue = parseFloat(e.target.value);
      });

    //decay
    this.shadowRoot
      .querySelector("#knobDecay")
      .addEventListener("input", (e) => {
        if (this.player == undefined) return;
        this.player.effects.decayValue = parseFloat(e.target.value);
      });

    //sustain
    this.shadowRoot
      .querySelector("#knobSustain")
      .addEventListener("input", (e) => {
        if (this.player == undefined) return;
        this.player.effects.sustainValue = parseFloat(e.target.value);
      });

    //release
    this.shadowRoot
      .querySelector("#knobRelease")
      .addEventListener("input", (e) => {
        if (this.player == undefined) return;
        this.player.effects.releaseValue = parseFloat(e.target.value);
      });
  }

  //initialize knobs values
  initKnobs() {
    const effectKnobs = this.shadowRoot.querySelectorAll(".knob");
    effectKnobs.forEach((effectKnob) => {
      effectKnob.classList.add("element-disabled");
    });

    const btnReverse = this.shadowRoot.querySelector("#reverse");
    btnReverse.disabled = true;
    btnReverse.classList.remove("choose");

    //ADSR;
    const envBtn = this.shadowRoot.querySelector("#envBtn");
    const envKnobs = this.shadowRoot.querySelectorAll(".knobEnv");
    //disable all env knobs
    envKnobs.forEach((envKnob) => {
      envKnob.classList.add("element-disabled");
    });
    envBtn.disabled = true;
    envBtn.classList.remove("choose");

    this.shadowRoot.querySelector("#knob1").value = 0.5;
    this.shadowRoot.querySelector("#knob2").value = 0;
    this.shadowRoot.querySelector("#knob3").value = 0;
    this.shadowRoot.querySelector("#knobPitch").value = 0;
    this.shadowRoot.querySelector("#knobAttack").value = 0.2;
    this.shadowRoot.querySelector("#knobDecay").value = 0.2;
    this.shadowRoot.querySelector("#knobSustain").value = 1;
    this.shadowRoot.querySelector("#knobRelease").value = 0.3;
  }

  setChoiceButtons() {
    const knob = this.shadowRoot.querySelector("#choiceKnobs");
    const explorer = this.shadowRoot.querySelector("#choiceExplorer");
    const MIDI = this.shadowRoot.querySelector("#choiceMIDI");

    const divKnob = this.shadowRoot.querySelector("#knobs");
    const divExplorer = this.shadowRoot.querySelector("#explorer");
    const divMIDI = this.shadowRoot.querySelector("#MIDI");

    explorer.classList.add("choose");

    divKnob.style.display = "none";
    divExplorer.style.display = "inline-block";
    divMIDI.style.display = "none";

    knob.addEventListener("click", (e) => {
      divKnob.style.display = "grid";
      divExplorer.style.display = "none";
      divMIDI.style.display = "none";

      knob.classList.add("choose");
      explorer.classList.remove("choose");
      MIDI.classList.remove("choose");
    });

    explorer.addEventListener("click", (e) => {
      divKnob.style.display = "none";
      divExplorer.style.display = "inline-block";
      divMIDI.style.display = "none";

      knob.classList.remove("choose");
      explorer.classList.add("choose");
      MIDI.classList.remove("choose");
    });

    MIDI.addEventListener("click", (e) => {
      divKnob.style.display = "none";
      divExplorer.style.display = "none";
      divMIDI.style.display = "flex";

      knob.classList.remove("choose");
      explorer.classList.remove("choose");
      MIDI.classList.add("choose");
    });
  }

  setApiKey() {
    const apiKeyInput = this.shadowRoot.querySelector("#apiKey");
    const save = this.shadowRoot.querySelector("#apiKeyButton");

    // Get the API key from the localStorage
    if (localStorage.getItem("apiKey") != null) {
      this.apiKey = localStorage.getItem("apiKey");
      apiKeyInput.value = this.apiKey;
      save.classList.add("saved");
    }

    apiKeyInput.addEventListener("focus", (e) => {
      save.classList.remove("saved");
      //disable keyboard events for playin pads
      this.enableKeyboard = false;
    });

    //add listeners on keyboard for typing api key
    apiKeyInput.addEventListener("blur", (e) => {
      this.enableKeyboard = true;
      this.shadowRoot.querySelector("#sampler").focus();
    });

    // click on save button when press enter
    apiKeyInput.addEventListener("keyup", (e) => {
      if (e.code === "Enter") {
        this.enableKeyboard = true;
        save.click();
        save.classList.add("saved");
        apiKeyInput.blur();
      }
    });

    save.addEventListener("click", (e) => {
      this.apiKey = apiKeyInput.value;

      // add the API key to the localStorage
      localStorage.setItem("apiKey", this.apiKey);

      save.classList.add("saved");
    });
  }

  setLabel(index, b, defaultName) {
    const label = this.shadowRoot.querySelector("#labelSampleName");
    const input = this.shadowRoot.querySelector("#inputSampleName");
    const buttonText = b.querySelector(".button_text");

    if (buttonText) {
      label.textContent = buttonText.textContent;
    } else {
      label.textContent = b.textContent;
    }

    label.style.cursor = "pointer";

    if (!b) {
      label.ondblclick = () => {
        return;
      };
    } else {
      if (
        b.classList.contains("selected") &&
        (b.classList.contains("resultButton") ||
          b.nodeName === "WEBAUDIO-SWITCH")
      ) {
        label.ondblclick = () => {
          if (!b.classList.contains("selected")) return;
          label.style.display = "none";
          input.value = label.textContent;
          input.style.display = "inline-block";
          input.style.outline = "none";
          input.focus();
        };

        input.onblur = () => {
          label.textContent = input.value;
          if (b.classList.contains("resultButton")) {
            if (label.textContent == "") label.textContent = defaultName;
            b.textContent = label.textContent;
          } else if (b.nodeName === "WEBAUDIO-SWITCH") {
            if (label.textContent == "") {
              label.textContent = SamplerHTMLElement.defaultName[index];
            }
            SamplerHTMLElement.name[index] = label.textContent;
            const currentButtonText = b.querySelector(".button_text");
            currentButtonText.innerHTML = SamplerHTMLElement.name[index];
          }
          label.style.display = "inline-block";
          input.style.display = "none";
          this.enableKeyboard = true;
          //focus on the sampler element for event keyboard
          this.shadowRoot.querySelector("#sampler").focus();
        };

        input.addEventListener("focus", (e) => {
          this.enableKeyboard = false;
          // if we press enter, we save the name
          input.addEventListener("keyup", (e) => {
            if (e.code === "Enter") {
              this.enableKeyboard = true;
              input.blur();
            }
          });
        });
      }
    }
  }

  setExplorer() {
    const search = this.shadowRoot.querySelector("#search");
    const searchButton = this.shadowRoot.querySelector("#searchButton");
    const time = this.shadowRoot.querySelector("#timeRange");
    const results = this.shadowRoot.querySelector("#results");
    const next = this.shadowRoot.querySelector("#nextPage");
    const previous = this.shadowRoot.querySelector("#previousPage");

    next.disabled = true;
    previous.disabled = true;

    // disable keyboard events for playin pads
    search.addEventListener("focus", (e) => {
      this.enableKeyboard = false;
    });

    // add listeners on keyboard for typing
    search.addEventListener("blur", (e) => {
      this.enableKeyboard = true;
      this.shadowRoot.querySelector("#sampler").focus();
    });

    let option = "";
    let numPage = 1;

    time.innerHTML = 5;
    time.value = 5;

    // add time options from 1 to 5 seconds
    for (let i = 1; i <= 5; i++) {
      option = document.createElement("option");
      option.value = i;
      option.innerHTML = "< " + i + "s";
      time.appendChild(option);
    }

    // add time options from 10 to 20 seconds
    for (let i = 10; i <= 20; i += 5) {
      option = document.createElement("option");
      option.value = i;
      option.innerHTML = "< " + i + "s";
      time.appendChild(option);
    }

    // add time option for unlimited duration
    option = document.createElement("option");
    option.value = "unlimited";
    option.innerHTML = "all";
    time.appendChild(option);

    // add listeners on next and previous buttons
    next.addEventListener("click", (e) => {
      numPage++;
      searchButton.click();
    });

    previous.addEventListener("click", (e) => {
      if (numPage > 1) {
        numPage--;
        searchButton.click();
      }
    });

    // click on search button when press enter
    search.addEventListener("keyup", (e) => {
      if (e.code === "Enter") {
        this.enableKeyboard = true;
        searchButton.click();
        search.blur();
      }
    });

    searchButton.addEventListener("click", (e) => {
      next.disabled = true;
      previous.disabled = true;

      searchButton.disabled = true;
      searchButton.classList.remove("error");
      searchButton.innerHTML = "Searching...";

      results.classList.remove("error");
      results.innerHTML = "";

      this.stopAllSoundsExplorer();
      this.explorerSamplePlayers = [];
      let arrayOfSoundObjectURLs = [];

      this.getSounds(search.value, numPage).then((arrayOfSoundIds) => {
        arrayOfSoundIds.map((soundObject, index) => {
          const id = soundObject[0];
          const name = soundObject[1];
          const urlOfSoundObject = `${this.apiUrl}/sounds/${id}/?token=${this.apiKey}`;

          arrayOfSoundObjectURLs.push(urlOfSoundObject);
        });

        // use Promise.all to get all the sound objects
        Promise.all(arrayOfSoundObjectURLs.map((url) => fetch(url)))
          .then((responses) => Promise.all(responses.map((res) => res.json())))
          .then((soundObjects) => {
            // use Promise.all to get all the sound previews as mp3 files
            const arrayOfSoundPreviews = soundObjects.map(
              (soundObject) => soundObject.previews["preview-hq-mp3"]
            );

            arrayOfSoundPreviews.forEach((soundPreview, index) => {
              this.setResultSound(
                index,
                arrayOfSoundIds[index][1],
                arrayOfSoundPreviews[index]
              );
            });

            let bl = new BufferLoader(
              this.plugin.audioContext,
              arrayOfSoundPreviews,
              this.shadowRoot,
              (bufferList) => {
                // when all sounds are loaded, we store them in an array
                this.decodedSounds = bufferList;
                this.explorerDecodedSounds = bufferList;

                // For each sounds we create a SamplePlayer
                this.decodedSounds.forEach((decodedSound, index) => {
                  this.explorerSamplePlayers[index] = new SamplePlayer(
                    this.plugin.audioContext,
                    this.canvas,
                    this.canvasOverlay,
                    "orange",
                    decodedSound,
                    this.plugin.audioNode,
                    0
                  );

                  const b = this.shadowRoot.querySelector("#result" + index);

                  // add the class 'set' to the button
                  b.classList.add("set");
                  // add draggable attribute to the button for drag and drop events
                  b.setAttribute("draggable", "true");

                  window.requestAnimationFrame(this.handleAnimationFrame);
                });
              }
            );

            bl.loadExplorer();

            if (!searchButton.classList.contains("error")) {
              searchButton.textContent = "Search";
            } else {
              searchButton.textContent = "Error";
            }
            next.disabled = false;
            if (numPage > 1) {
              previous.disabled = false;
            }
            searchButton.disabled = false;
          });
      });
    });
  }

  getSounds(queryText, nbPage) {
    let time = this.shadowRoot.querySelector("#timeRange").value;
    const searchButton = this.shadowRoot.querySelector("#searchButton");
    const results = this.shadowRoot.querySelector("#results");

    let url = "";

    if (time === "unlimited") {
      url = `${this.apiUrl}/search/text/?query=${queryText}&token=${this.apiKey}&page_size=9&page=${nbPage}`;
    } else {
      url = `${this.apiUrl}/search/text/?query=${queryText}&token=${this.apiKey}&page_size=9&page=${nbPage}&filter=duration:[0.0 TO ${time}.0]`;
    }

    const xhr = new XMLHttpRequest();
    xhr.open("GET", url);
    xhr.responseType = "json";

    return new Promise((resolve, reject) => {
      xhr.onreadystatechange = () => {
        if (xhr.readyState === 4) {
          if (xhr.status === 200) {
            const arrayOfSoundIdsAndNames = xhr.response.results.map(
              (sound) => [sound.id, sound.name]
            );
            resolve(arrayOfSoundIdsAndNames);
          } else if (xhr.status === 401) {
            if (!searchButton.classList.contains("error")) {
              searchButton.classList.add("error");
              searchButton.textContent = "Error";
            }
            searchButton.disabled = false;

            results.classList.add("error");
            results.innerHTML =
              "Unauthorized : " +
              xhr.response.detail +
              "<br><br>Please check your API key.";
            reject(new Error("Unauthorized : " + xhr.response.detail));
          } else if (xhr.status === 404) {
            if (!searchButton.classList.contains("error")) {
              searchButton.classList.add("error");
              searchButton.textContent = "Error";
            }
            searchButton.disabled = false;

            results.classList.add("error");
            results.innerHTML = "Sounds not found : " + xhr.response.detail;
            reject(new Error("Sounds not found : " + xhr.response.detail));
          } else if (xhr.status === 429) {
            if (!searchButton.classList.contains("error")) {
              searchButton.classList.add("error");
              searchButton.textContent = "Error";
            }
            searchButton.disabled = false;

            results.classList.add("error");
            results.innerHTML = "Too many requests : " + xhr.response.detail;
            reject(new Error("Too many requests : " + xhr.response.detail));
          } else {
            if (!searchButton.classList.contains("error")) {
              searchButton.classList.add("error");
              searchButton.textContent = "Error";
            }
            searchButton.disabled = false;

            results.classList.add("error");
            results.innerHTML = "Failed to get sounds : " + xhr.response.detail;
            reject(new Error("Failed to get sounds : " + xhr.response.detail));
          }
        }
      };
      xhr.send();
    });
  }

  setAllDragAndDrop() {
    this.shadowRoot.querySelectorAll(".switchpad").forEach((b) => {
      //b.setAttribute('draggable', true);

      b.addEventListener("dragstart", (e) => {
        e.stopPropagation();
        e.dataTransfer.setData("id", e.target.id);
      });

      b.addEventListener("dragover", (e) => {
        e.stopPropagation();
        e.preventDefault();
      });

      b.addEventListener("dragmove", (e) => {
        e.preventDefault();
      });

      b.addEventListener("drop", (e) => {
        e.preventDefault();
        e.stopPropagation();
        let btnTargetId;

        btnTargetId = e.target.id;

        const dropIndex = btnTargetId;
        const dragIndex = e.dataTransfer.getData("id");
        const dropUrl = e.dataTransfer.getData("url");

        if (dragIndex.startsWith("switchpad")) {
          if (dragIndex != dropIndex) {
            this.swapSample(dragIndex, dropIndex);
          }
        } else if (dragIndex.startsWith("result")) {
          this.addSampleToPad(dragIndex, dropIndex, dropUrl);
        }
      });

      b.addEventListener("dragend", (e) => {
        let target = e.target;
        if (!e.target.classList.contains("switchpad"))
          target = e.target.parentNode;
        target.setValue(0, true);
        e.preventDefault();
      });
    });
  }

  swapSample = (index1, index2) => {
    // we get the index number
    const numberRegex = /\d+/g;
    if (typeof index1 === "string" && typeof index2 === "string") {
      index1 = index1.match(numberRegex)[0];
      index2 = index2.match(numberRegex)[0];
    }

    if (index1 === index2) return;

    const div1 = this.shadowRoot.querySelector("#p" + index1);
    const div2 = this.shadowRoot.querySelector("#p" + index2);

    // remove the button delete if it exists
    if (div1.querySelector(".deleteSample")) {
      div1.querySelector(".deleteSample").remove();
    }

    if (div2.querySelector(".deleteSample")) {
      div2.querySelector(".deleteSample").remove();
    }

    // set the correct id
    div1.querySelector(".switchpad").id = "switchpad" + index1;
    div2.querySelector(".switchpad").id = "switchpad" + index2;

    const button1 = this.shadowRoot.querySelector("#switchpad" + index1);
    const button2 = this.shadowRoot.querySelector("#switchpad" + index2);

    if (!button1.classList.contains("selected")) return;

    //swap progress bar
    const progressPad1 = div1.querySelector("#progress" + index1);
    const progressPad2 = div2.querySelector("#progress" + index2);
    const clonedProgress1 = progressPad1.cloneNode(true);
    const clonedProgress2 = progressPad2.cloneNode(true);
    div1.replaceChild(clonedProgress2, progressPad1);
    div2.replaceChild(clonedProgress1, progressPad2);
    div1.querySelector(".padprogress").id = "progress" + index1;
    div2.querySelector(".padprogress").id = "progress" + index2;

    if (SamplerHTMLElement.URLs[index2] === undefined) {
      SamplerHTMLElement.URLs[index2] = "";
    }
    if (SamplerHTMLElement.URLs[index1] === undefined) {
      SamplerHTMLElement.URLs[index1] = "";
    }

    if (SamplerHTMLElement.name[index2] === undefined) {
      SamplerHTMLElement.name[index2] = "";
    }
    if (SamplerHTMLElement.name[index1] === undefined) {
      SamplerHTMLElement.name[index1] = "";
    }

    //Swap urls
    const tempURL = SamplerHTMLElement.URLs[index1];
    SamplerHTMLElement.URLs[index1] = SamplerHTMLElement.URLs[index2];
    SamplerHTMLElement.URLs[index2] = tempURL;

    //Swap names
    const tempName = SamplerHTMLElement.name[index1];
    SamplerHTMLElement.name[index1] = SamplerHTMLElement.name[index2];
    SamplerHTMLElement.name[index2] = tempName;

    //Swap default names
    const tempDefaultName = SamplerHTMLElement.defaultName[index1];
    SamplerHTMLElement.defaultName[index1] =
      SamplerHTMLElement.defaultName[index2];
    SamplerHTMLElement.defaultName[index2] = tempDefaultName;

    // Swap SamplePlayers
    const tempPlayer = this.samplePlayers[index1];
    this.samplePlayers[index1] = this.samplePlayers[index2];
    this.samplePlayers[index2] = tempPlayer;

    if (!button1.querySelector(".button_text")) {
      const buttonText = document.createElement("p");
      buttonText.classList.add("button_text");
      buttonText.id = "button_text" + index1;
      button1.innerHTML = "";
      button1.appendChild(buttonText);
    }

    if (!button2.querySelector(".button_text")) {
      const buttonText = document.createElement("p");
      buttonText.classList.add("button_text");
      buttonText.id = "button_text" + index2;
      button2.innerHTML = "";
      button2.appendChild(buttonText);
    }

    if (!button1.classList.contains("set")) {
      this.setSwitchPad(index1);
      button1.classList.remove("selected");
    }

    if (!button2.classList.contains("set")) {
      this.setSwitchPad(index2);
      this.setLabel(index2, button2);
      button2.classList.add("selected");
    }

    this.setDefaultPadKeyValue(index1);
    this.setDefaultPadKeyValue(index2);
  };

  addSampleToPad = (index1, index2, url) => {
    this.stopAllSoundsExplorer();

    //get the index number
    const numberRegex = /\d+/g;
    index1 = index1.match(numberRegex)[0];
    index2 = index2.match(numberRegex)[0];

    const div1 = this.shadowRoot.querySelector("#resultExplorer" + index1);
    const div2 = this.shadowRoot.querySelector("#p" + index2);

    const padElement = div2.children[0].tagName;

    if (div2.querySelector(".deleteSample")) {
      div2.querySelector(".deleteSample").remove();
    }

    const button = div1.querySelector(".resultButton");

    //clone progress bar
    const progressExplorer = div1.querySelector(".progressExplorer");
    const progressPad = div2.querySelector(".padprogress");
    const newProgressPad = progressExplorer.cloneNode(true);
    div2.replaceChild(newProgressPad, progressPad);
    newProgressPad.classList.replace("progressExplorer", "padprogress");
    newProgressPad.id = "progress" + index2;

    // get the url of the sound back
    SamplerHTMLElement.URLs[index2] = url;

    // get the name of the sound back
    SamplerHTMLElement.name[index2] = button.innerHTML;
    SamplerHTMLElement.defaultName[index2] = button.innerHTML;

    //recreate a new SamplePlayer independant of the explorer
    this.samplePlayers[index2] = new SamplePlayer(
      this.plugin.audioContext,
      this.canvas,
      this.canvasOverlay,
      "orange",
      this.explorerDecodedSounds[index1],
      this.plugin.audioNode,
      0
    );

    // set pads
    if (padElement === "WEBAUDIO-SWITCH") {
      this.setSwitchPad(index2);
      const padBtn = this.shadowRoot.querySelector("#switchpad" + index2);
      this.setLabel(index2, padBtn);

      //Remove selected class from all switchpad
      const switchPads = this.shadowRoot.querySelectorAll(".switchpad");
      switchPads.forEach((switchPad) => {
        switchPad.classList.remove("selected");
      });

      padBtn.classList.add("selected");
    }

    // update player
    this.player = this.samplePlayers[index2];
    this.shadowRoot.querySelector("#labelSampleName").innerHTML =
      button.innerHTML;
    this.player.drawWaveform();

    //set default keyboard value for playing pads
    this.setDefaultPadKeyValue(index2);
  };

  stopAllSoundsPads = () => {
    for (let i = 0; i < this.samplePlayers.length; i++) {
      if (this.samplePlayers[i] != null) {
        this.samplePlayers[i].stop();
        if (
          this.samplePlayers[i].classList &&
          this.samplePlayers[i].classList.contains("selected")
        )
          this.samplePlayers[i].classList.remove("selected");
      }
    }
  };

  stopAllSoundsExplorer = () => {
    for (let i = 0; i < this.explorerSamplePlayers.length; i++) {
      if (this.explorerSamplePlayers[i] != null) {
        this.explorerSamplePlayers[i].stop();
        // this.exporterSamplePLayers[i].classList.remove('selected');
      }
    }
  };

  setResultSound = (index, name, url) => {
    // add a div resultExplorer for each sound
    const div = document.createElement("div");
    div.classList.add("resultExplorer");
    div.id = "resultExplorer" + index;
    this.shadowRoot.querySelector("#results").appendChild(div);

    // add a button for each sound
    const b = document.createElement("button");
    b.classList.add("resultButton");
    b.id = "result" + index;
    let defaultName = name;
    b.innerHTML = name;
    b.addEventListener("click", (e) => {
      // if the sound is loaded
      if (this.explorerSamplePlayers[index] != null) {
        this.stopAllSoundsPads();
        this.stopAllSoundsExplorer();

        this.player = this.explorerSamplePlayers[index];
        this.shadowRoot.querySelector("#labelSampleName").innerHTML =
          b.innerHTML.split("<")[0];
        this.player.drawWaveform();
        this.player.play();
        b.classList.add("active");
        setTimeout(() => {
          b.classList.remove("active");
        }, 100);

        // remove the class 'selected' from all the buttons
        const buttons = this.shadowRoot.querySelectorAll(".padbutton");
        buttons.forEach((button) => {
          button.classList.remove("selected");
        });

        //Remove selected class from all switchpad
        const switchPads = this.shadowRoot.querySelectorAll(".switchpad");
        switchPads.forEach((switchPad) => {
          switchPad.classList.remove("selected");
        });

        // remove the class 'selected' from all the buttons of the explorer
        const buttonsExplorer =
          this.shadowRoot.querySelectorAll(".resultButton");
        buttonsExplorer.forEach((button) => {
          button.classList.remove("selected");
        });

        //Disable create NoteSet
        this.shadowRoot.querySelector("#createNoteSet").disabled = true;
        this.shadowRoot
          .querySelector("#createNoteSet")
          .classList.add("element-disabled");

        // add the class 'selected' to the button
        b.classList.add("selected");

        this.setLabel(index, b, defaultName);
      }
    });

    b.addEventListener("dragstart", (e) => {
      e.dataTransfer.setData("id", e.target.id);
      e.dataTransfer.setData("url", url);
    });

    b.addEventListener("dragover", (e) => {
      e.preventDefault();
    });

    b.addEventListener("dragend", (e) => {
      e.preventDefault();
    });

    // add the button to the div
    this.shadowRoot.querySelector("#resultExplorer" + index).appendChild(b);

    // add a progress bar for each sound
    const progressExplorer = document.createElement("progress");
    progressExplorer.classList.add("progressExplorer");
    progressExplorer.id = "progressExplorer" + index;
    progressExplorer.value = 0;
    progressExplorer.max = 1;
    this.shadowRoot
      .querySelector("#resultExplorer" + index)
      .appendChild(progressExplorer);
  };

  setDefaultPadsKeyValue() {
    const switchPads = this.shadowRoot.querySelectorAll(".switchpad");
    for (let i = 0; i < switchPads.length; i++) {
      const switchPad = this.shadowRoot.querySelector("#switchpad" + i);
      if (switchPad.querySelector(".button_key_text")) return;
      const buttonKeyValue = document.createElement("div");
      buttonKeyValue.classList.add("button_key_text");
      buttonKeyValue.id = "button_key_text" + i;
      const keyArr = [
        "W/Z",
        "X",
        "C",
        "V",
        "Q/A",
        "S",
        "D",
        "F",
        "A/Q",
        "Z/W",
        "E",
        "R",
        "1",
        "2",
        "3",
        "4",
      ];
      buttonKeyValue.innerHTML = keyArr[i];
      switchPad.appendChild(buttonKeyValue);
    }
  }

  setDefaultPadKeyValue(index) {
    const switchPad = this.shadowRoot.querySelector("#switchpad" + index);
    const buttonKeyValue = document.createElement("div");
    if (switchPad.querySelector(".button_key_text")) return;
    buttonKeyValue.classList.add("button_key_text");
    buttonKeyValue.id = "button_key_text" + index;
    const keyArr = [
      "W/Z",
      "X",
      "C",
      "V",
      "Q/A",
      "S",
      "D",
      "F",
      "A/Q",
      "Z/W",
      "E",
      "R",
      "1",
      "2",
      "3",
      "4",
    ];
    buttonKeyValue.innerHTML = keyArr[index];
    switchPad.appendChild(buttonKeyValue);
  }

  setMidiNoteName(index, noteValue, noteName) {
    if (!noteValue) return;
    const switchPad = this.shadowRoot.querySelector("#switchpad" + index);
    const PadMidiNoteValue = document.createElement("div");
    PadMidiNoteValue.classList.add("button_midi_note");
    PadMidiNoteValue.id = "button_midi_note" + index;

    //convert midi note value to midi note name
    const midiNotes = [
      "A0",
      "A#0",
      "B0",
      "C1",
      "C#1",
      "D1",
      "D#1",
      "E1",
      "F1",
      "F#1",
      "G1",
      "G#1",
      "A1",
      "A#1",
      "B1",
      "C2",
      "C#2",
      "D2",
      "D#2",
      "E2",
      "F2",
      "F#2",
      "G2",
      "G#2",
      "A2",
      "A#2",
      "B2",
      "C3",
      "C#3",
      "D3",
      "D#3",
      "E3",
      "F3",
      "F#3",
      "G3",
      "G#3",
      "A3",
      "A#3",
      "B3",
      "C4",
      "C#4",
      "D4",
      "D#4",
      "E4",
      "F4",
      "F#4",
      "G4",
      "G#4",
      "A4",
      "A#4",
      "B4",
      "C5",
      "C#5",
      "D5",
      "D#5",
      "E5",
      "F5",
      "F#5",
      "G5",
      "G#5",
      "A5",
      "A#5",
      "B5",
      "C6",
      "C#6",
      "D6",
      "D#6",
      "E6",
      "F6",
      "F#6",
      "G6",
      "G#6",
      "A6",
      "A#6",
      "B6",
      "C7",
      "C#7",
      "D7",
      "D#7",
      "E7",
      "F7",
      "F#7",
      "G7",
      "G#7",
      "A7",
      "A#7",
      "B7",
      "C8",
      "C#8",
      "D8",
      "D#8",
      "E8",
      "F8",
      "F#8",
      "G8",
      "G#8",
      "A8",
      "A#8",
      "B8",
      "C9",
      "C#9",
      "D9",
      "D#9",
      "E9",
      "F9",
      "F#9",
      "G9",
      "G#9",
    ];
    //A0 = 21
    let newNoteValue = noteValue - 21;
    if (!noteName) {
      noteName = midiNotes[newNoteValue];
    }
    PadMidiNoteValue.innerHTML = noteName;
    if (!switchPad.querySelector(".button_midi_note")) {
      switchPad.appendChild(PadMidiNoteValue);
    } else {
      switchPad.replaceChild(
        PadMidiNoteValue,
        switchPad.querySelector(".button_midi_note")
      );
    }
  }

  setNoteValue(index, noteName) {
    const switchPad = this.shadowRoot.querySelector("#switchpad" + index);
    //convert midi note name to midi note value
    const midiNotes = [
      "A0",
      "A#0",
      "B0",
      "C1",
      "C#1",
      "D1",
      "D#1",
      "E1",
      "F1",
      "F#1",
      "G1",
      "G#1",
      "A1",
      "A#1",
      "B1",
      "C2",
      "C#2",
      "D2",
      "D#2",
      "E2",
      "F2",
      "F#2",
      "G2",
      "G#2",
      "A2",
      "A#2",
      "B2",
      "C3",
      "C#3",
      "D3",
      "D#3",
      "E3",
      "F3",
      "F#3",
      "G3",
      "G#3",
      "A3",
      "A#3",
      "B3",
      "C4",
      "C#4",
      "D4",
      "D#4",
      "E4",
      "F4",
      "F#4",
      "G4",
      "G#4",
      "A4",
      "A#4",
      "B4",
      "C5",
      "C#5",
      "D5",
      "D#5",
      "E5",
      "F5",
      "F#5",
      "G5",
      "G#5",
      "A5",
      "A#5",
      "B5",
      "C6",
      "C#6",
      "D6",
      "D#6",
      "E6",
      "F6",
      "F#6",
      "G6",
      "G#6",
      "A6",
      "A#6",
      "B6",
      "C7",
      "C#7",
      "D7",
      "D#7",
      "E7",
      "F7",
      "F#7",
      "G7",
      "G#7",
      "A7",
      "A#7",
      "B7",
      "C8",
      "C#8",
      "D8",
      "D#8",
      "E8",
      "F8",
      "F#8",
      "G8",
      "G#8",
      "A8",
      "A#8",
      "B8",
      "C9",
      "C#9",
      "D9",
      "D#9",
      "E9",
      "F9",
      "F#9",
      "G9",
      "G#9",
    ];
    const noteValue = midiNotes.indexOf(noteName) + 21;

    this.setMidiNoteName(index, noteValue, noteName);

    switchPad.midiController.cc = noteValue;
    switchPad.midiController.channel = 0;
  }

  updateMidiNoteValue(noteValue) {
    const preset = this.shadowRoot.querySelector("#selectPreset").value;
    let menu = document.getElementById("webaudioctrl-context-menu");
    let stockMidiLearn = localStorage.getItem("WebAudioControlsMidiLearn");
    let listMidiLearn = JSON.parse(stockMidiLearn);

    //if pad is learning....
    if (menu.knob && menu.knob.checked) {
      //if another pad has already this midi note value, remove the previous midi learn
      if (listMidiLearn.find((element) => element.cc.cc === noteValue)) {
        let filterList = listMidiLearn.filter(
          (element) => element.cc.cc === noteValue
        );
        let filterListPresets;
        //if there is more than one pad with this midi note value or if the pad is already assigned to this midi note value, remove the previous midi learn
        if (filterList.length > 1) {
          filterList = filterList.filter(
            (element) => element.id != menu.knob.id
          );
          filterList.map((element) => {
            element.cc = {};
          });
          const switchPadsId = filterList.map((element) => element.id);
          const switchPads = switchPadsId.map((element) =>
            this.shadowRoot.querySelector("#" + element)
          );
          switchPads.forEach((switchPad) => {
            switchPad.midiController = {};
            if (switchPad.querySelector(".button_midi_note")) {
              switchPad.querySelector(".button_midi_note").remove();
            }
            switchPad.setValue(0);
          });
        }
        localStorage.setItem(
          "WebAudioControlsMidiLearn",
          JSON.stringify(listMidiLearn)
        );
      }
    }
    menu.onclick = (e) => {
      const switchPad = menu.knob.id;
      const switchPadNote = menu.knob.midiController.cc;
      //get current Preset
      const preset = this.shadowRoot.querySelector("#selectPreset").value;

      let stockMidiLearn = localStorage.getItem("WebAudioControlsMidiLearn");
      let listMidiLearn = JSON.parse(stockMidiLearn);

      if (!listMidiLearn) return;

      if (!switchPadNote) {
        if (menu.knob.querySelector(".button_midi_note")) {
          menu.knob.querySelector(".button_midi_note").remove();
        }
      }
    };

    this.clearAllMidiLearning();
    this.resetAllMidiLearning();
    const defaultMidiLearnBtn =
      this.shadowRoot.querySelector("#defaultMidiLearn");
    defaultMidiLearnBtn.onclick = () => {
      let manualClick = true;
      this.defaultMidiMapping(manualClick);
    };
  }

  clearAllMidiLearning() {
    const clearBtn = this.shadowRoot.querySelector("#clearMidiLearn");
    clearBtn.onclick = () => {
      const switchpads = this.shadowRoot.querySelectorAll(".switchpad");
      switchpads.forEach((switchpad) => {
        switchpad.midiController = {};
        if (switchpad.querySelector(".button_midi_note")) {
          switchpad.querySelector(".button_midi_note").remove();
        }
      });
      let stockMidiLearn = localStorage.getItem("WebAudioControlsMidiLearn");
      let listMidiLearn = JSON.parse(stockMidiLearn);
      listMidiLearn.map((element) => {
        element.cc = {};
      });
      localStorage.setItem(
        "WebAudioControlsMidiLearn",
        JSON.stringify(listMidiLearn)
      );
    };
  }

  resetAllMidiLearning() {
    //if there is a preset saved with midi learns, reset all midi learns to the swtichpads
    const resetBtn = this.shadowRoot.querySelector("#resetMidiLearn");
    resetBtn.onclick = () => {
      const currentPreset =
        this.shadowRoot.querySelector("#selectPreset").value;
      const switchpads = this.shadowRoot.querySelectorAll(".switchpad");
      if (
        localStorage.presets &&
        PresetManager.getMidiLearnListFromCurrentPreset(currentPreset)
      ) {
        PresetManager.loadMidiControllerFromCurrentPreset(
          currentPreset,
          switchpads
        );

        switchpads.forEach((switchpad) => {
          const index = switchpad.id.match(/\d+/g)[0];
          // if(!switchpad.querySelector('.button_midi_note')){
          const currentMidiLearn = PresetManager.getMidiLearnFromCurrentPreset(
            currentPreset,
            switchpad.id
          );
          if (currentMidiLearn.cc.cc === undefined) {
            if (switchpad.querySelector(".button_midi_note")) {
              switchpad.querySelector(".button_midi_note").remove();
            }
          }
          this.setMidiNoteName(index, currentMidiLearn.cc.cc);
        });
      } else {
        this.defaultMidiMapping();
      }
    };
  }

  defaultMidiMapping(manualClick) {
    const switchPads = this.shadowRoot.querySelectorAll(".switchpad");
    // !!! Set here the default root midi note for the first switchpad !!!
    const defaultRootMidiNote = 60; // 60 is C4
    let midiLearnList = [];
    const preset = this.shadowRoot.querySelector("#selectPreset").value;
    PresetManager.setDefaultMidiMapping(
      preset,
      switchPads,
      defaultRootMidiNote
    );
    if (localStorage.presets && !manualClick) {
      if (PresetManager.getMidiLearnListFromCurrentPreset(preset)) {
        const midiList =
          PresetManager.getMidiLearnListFromCurrentPreset(preset);
        midiList.forEach((midi) => {
          if (midi.id.includes("switchpad")) {
            this.setMidiNoteName(midi.id.match(/\d+/g)[0], midi.cc.cc);
          }
        });
      } else {
        switchPads.forEach((switchPad) => {
          // switchPad.midiController = {};
          const index = switchPad.id.match(/\d+/g)[0];
          this.setMidiNoteName(index, defaultRootMidiNote + parseInt(index));
          midiLearnList.push({
            id: switchPad.id,
            cc: { cc: defaultRootMidiNote + parseInt(index), channel: 0 },
          });
          if (switchPad.midiController) {
            switchPad.midiController.channel = 0;
            switchPad.midiController.cc = defaultRootMidiNote + parseInt(index);
          }
        });
      }
    } else if (localStorage.WebAudioControlsMidiLearn) {
      midiLearnList = JSON.parse(localStorage.WebAudioControlsMidiLearn);
      switchPads.forEach((switchPad) => {
        const index = switchPad.id.match(/\d+/g)[0];
        this.setMidiNoteName(index, defaultRootMidiNote + parseInt(index));
        const currentMidiLearn = midiLearnList.find(
          (element) => element.id == switchPad.id
        );
        currentMidiLearn.cc.channel = 0;
        currentMidiLearn.cc.cc = defaultRootMidiNote + parseInt(index);
        if (switchPad.midiController) {
          switchPad.midiController.cc = currentMidiLearn.cc.cc;
          switchPad.midiController.channel = currentMidiLearn.cc.channel;
        }
      });
    } else {
      switchPads.forEach((switchPad) => {
        const index = switchPad.id.match(/\d+/g)[0];
        this.setMidiNoteName(index, defaultRootMidiNote + parseInt(index));
        midiLearnList.push({
          id: switchPad.id,
          cc: { cc: defaultRootMidiNote + parseInt(index), channel: 0 },
        });
        if (switchPad.midiController) {
          switchPad.midiController.cc = defaultRootMidiNote + parseInt(index);
          switchPad.midiController.channel = 0;
        }
      });
    }
    if (midiLearnList.length > 0) {
      localStorage.setItem(
        "WebAudioControlsMidiLearn",
        JSON.stringify(midiLearnList)
      );
    }
  }

  setSwitchPad(index) {
    const switchPad = this.shadowRoot.querySelector("#switchpad" + index);
    const preset = this.shadowRoot.querySelector("#selectPreset").value;

    const buttonText = document.createElement("p");

    if (
      SamplerHTMLElement.URLs[index].includes("http") &&
      SamplerHTMLElement.name[index]
    ) {
      buttonText.innerHTML = SamplerHTMLElement.name[index];
    }

    //add p text element
    buttonText.classList.add("button_text");
    buttonText.id = "button_text" + index;
    //buttonText.innerHTML = switchPad.textContent;
    switchPad.innerHTML = "";
    switchPad.appendChild(buttonText);

    // Add a button to delete the sample in the top right corner
    if (buttonText && buttonText.innerHTML !== "") {
      const deleteSample = document.createElement("button");
      deleteSample.classList.add("deleteSample");
      deleteSample.id = "deleteSample" + index;
      deleteSample.innerHTML = "X";
      deleteSample.onmousedown = (e) => {
        e.preventDefault();
        e.stopPropagation();
        if (e.button == 2) {
          e.preventDefault();
          return;
        }
        this.deleteSample(index);
      };
      switchPad.appendChild(deleteSample);
    }

    //play sample
    switchPad.onmousedown = (e) => {
      //disable right click
      if (e.button == 2) {
        e.preventDefault();
        return;
      }

      if (this.player != this.samplePlayers[index]) {
        this.player = this.samplePlayers[index];
      }

      if (!this.player) {
        return;
      }

      this.setKnobsEffects();

      // Display the name of the sample above the waveform
      this.shadowRoot.querySelector("#labelSampleName").innerHTML =
        switchPad.innerHTML.split("<")[0];
      this.player.drawWaveform();

      //stop the previous sound if it's playing
      this.player.stop();

      //play the sample
      this.player.play();

      // remove the class 'selected' from all the buttons
      const buttons = this.shadowRoot.querySelectorAll(".padbutton");
      buttons.forEach((button) => {
        button.classList.remove("selected");
      });

      //Remove selected class from all switchpad
      const switchPads = this.shadowRoot.querySelectorAll(".switchpad");
      switchPads.forEach((switchPad) => {
        switchPad.classList.remove("selected");
      });

      // remove the class 'selected' from all the buttons of the explorer
      const buttonsExplorer = this.shadowRoot.querySelectorAll(".resultButton");
      buttonsExplorer.forEach((button) => {
        button.classList.remove("selected");
      });

      // add 'selected' class to the pad
      switchPad.classList.add("selected");

      //we can now rename the sample
      this.setLabel(index, switchPad);
    };

    const currentPreset = this.shadowRoot.querySelector("#selectPreset").value;

    if (localStorage.WebAudioControlsMidiLearn) {
      let stockMidiLearn = localStorage.getItem("WebAudioControlsMidiLearn");
      let listMidiLearn = JSON.parse(stockMidiLearn);
      const currentMidiLearn = listMidiLearn.find(
        (element) => element.id == switchPad.id
      );
      this.setMidiNoteName(index, currentMidiLearn.cc.cc);
      return;
    } else if (
      localStorage.presets &&
      PresetManager.getMidiLearnListFromCurrentPreset(currentPreset)
    ) {
      const currentMidiLearn = PresetManager.getMidiLearnFromCurrentPreset(
        currentPreset,
        switchPad.id
      );
      if (currentMidiLearn === undefined) return;
      this.setMidiNoteName(index, currentMidiLearn.cc.cc);
    }
  }

  setKnobsEffects() {
    // enable effects knobs
    const effectKnobs = this.shadowRoot.querySelectorAll(".knob");
    effectKnobs.forEach((effectKnob) => {
      effectKnob.classList.remove("element-disabled");
    });

    // set effects knobs to current values
    this.shadowRoot.querySelector("#knob1").value =
      this.player.effects.volumeGain;
    this.shadowRoot.querySelector("#knob2").value = this.player.effects.pan;
    this.shadowRoot.querySelector("#knob3").value =
      this.player.effects.toneValue;

    //pitch
    this.shadowRoot.querySelector("#knobPitch").value = this.player.semitones;

    const btnReverse = this.shadowRoot.querySelector("#reverse");
    btnReverse.disabled = false;
    btnReverse.classList.remove("element-disabled");

    btnReverse.value = this.player.reverseValue;
    this.player.reversed
      ? btnReverse.classList.add("choose")
      : btnReverse.classList.remove("choose");

    //adsr
    this.shadowRoot.querySelector("#knobAttack").value =
      this.player.effects.attackValue;
    this.shadowRoot.querySelector("#knobDecay").value =
      this.player.effects.decayValue;
    this.shadowRoot.querySelector("#knobSustain").value =
      this.player.effects.sustainValue;
    this.shadowRoot.querySelector("#knobRelease").value =
      this.player.effects.releaseValue;

    const envBtn = this.shadowRoot.querySelector("#envBtn");
    const envKnobs = this.shadowRoot.querySelectorAll(".knobEnv");
    envBtn.disabled = false;
    envBtn.classList.remove("element-disabled");
    envKnobs.forEach((envKnob) => {
      envKnob.classList.remove("element-disabled");
    });

    if (!this.player.enableAdsr) {
      envBtn.innerHTML = "Enable";
      envBtn.classList.remove("choose");
      envKnobs.forEach((envKnob) => {
        envKnob.classList.add("element-disabled");
      });
    } else {
      envBtn.innerHTML = "Disable";
      envBtn.classList.add("choose");
      envKnobs.forEach((envKnob) => {
        envKnob.classList.remove("element-disabled");
      });
    }
  }

  deleteSample(index) {
    const deleteSample = this.shadowRoot.querySelector("#deleteSample" + index);
    const b = this.shadowRoot.querySelector("#switchpad" + index);
    const midiLearnText = b.querySelector(".button_midi_note");

    // remove the click of the delete button
    b.removeChild(deleteSample);

    // Put back the value of the progress bar to 0
    const progressBar = this.shadowRoot.querySelector("#progress" + index);
    progressBar.value = 0;

    // Delete click listener
    b.onmousedown = null;

    // Stop samplePlayer
    this.samplePlayers[index].stop();

    // if the pad is the current pad selected, remove the canvas
    if (b.classList.contains("selected")) {
      this.canvasContext.clearRect(0, 0, this.canvas.width, this.canvas.height);
      this.canvasContextOverlay.clearRect(
        0,
        0,
        this.canvas.width,
        this.canvas.height
      );
      this.player = null;
      this.shadowRoot.querySelector("#labelSampleName").innerHTML = "Waveform";
    }

    // Delete the samplePlayer
    this.samplePlayers[index] = null;
    SamplerHTMLElement.URLs[index] = "";
    SamplerHTMLElement.name[index] = "";

    // Delete the pad
    b.innerHTML = "";
    b.classList.remove("set");
    b.classList.remove("selected");
    b.classList.remove("active");

    this.setDefaultPadKeyValue(index);
    if (midiLearnText != null) {
      b.appendChild(midiLearnText);
    }
  }

  setPreset = () => {
    const presetSelectMenu = this.shadowRoot.querySelector("#selectPreset");
    PresetManager.buildPresetMenu(presetSelectMenu);

    //!!for testing load the blank preset first !!
    let currentPresetName = "Basic Kit";
    //let currentPresetName = presetSelectMenu.value;

    this.loadCurrentPreset(currentPresetName);
    //Create Note Set
    this.createNoteSet();

    // When the preset is loaded, we load the new sounds
    presetSelectMenu.onchange = () => {
      // Stop all sounds
      this.stopAllSoundsPads();
      this.stopAllSoundsExplorer();
      // const currentPreset = PresetManager.getPreset(presetSelectMenu.value);
      presetSelectMenu.blur();
      currentPresetName = presetSelectMenu.value;
      this.loadCurrentPreset(currentPresetName);

      this.initKnobs();
    };
  };

  loadCurrentPreset(presetName, newDecodedSounds) {
    this.shadowRoot.querySelector("#selectPreset").value = presetName;

    this.plugin.audioNode.currentPreset = presetName;
    this.plugin.audioNode.gui = this;

    this.samplePlayers = [];
    this.player = null;
    this.canvasContext.clearRect(0, 0, this.canvas.width, this.canvas.height);
    this.canvasContextOverlay.clearRect(
      0,
      0,
      this.canvas.width,
      this.canvas.height
    );

    const label = this.shadowRoot.querySelector("#labelSampleName");
    label.style.cursor = "default";

    //reset the content of the switchpads
    const switchPads = this.shadowRoot.querySelectorAll(".switchpad");
    switchPads.forEach((switchPad) => {
      switchPad.innerHTML = "";
      switchPad.classList.remove("set");
      switchPad.classList.remove("selected");
      switchPad.classList.remove("active");
    });

    //reset Waveform sample label name
    this.shadowRoot.querySelector("#labelSampleName").innerHTML = "Waveform";

    //load current preset sounds
    this.loadSounds(presetName, newDecodedSounds);

    //delete preset button
    const deletePreset = this.shadowRoot.querySelector("#deletePreset");
    let preset;

    if (localStorage.presets) {
      preset = PresetManager.getCurrentPreset(presetName);
    } else {
      preset = PresetManager.getFactoryPreset(presetName);
    }

    if (preset.isFactoryPresets) {
      deletePreset.innerHTML = "Reset preset";
    } else if (!preset.isFactoryPresets) {
      deletePreset.innerHTML = "Delete preset";
    }

    deletePreset.onclick = () => {
      this.deletePreset();
    };

    //save preset button
    const savePreset = this.shadowRoot.querySelector("#savePreset");
    savePreset.onclick = () => {
      this.savePreset();
    };

    //create preset button
    const createPreset = this.shadowRoot.querySelector("#createPreset");
    createPreset.onclick = () => {
      this.createPreset("custom preset", switchPads);
    };

    const noteSetBtn = this.shadowRoot.querySelector("#createNoteSet");
    noteSetBtn.disabled = true;
    noteSetBtn.classList.add("element-disabled");
  }

  loadCurrentState(currentState) {
    SamplerHTMLElement.URLs = changePathToAbsolute(
      PresetManager.getPresetUrls(currentState)
    );
    SamplerHTMLElement.defaultName =
      PresetManager.getPresetUrlsNames(currentState);

    let bl = new BufferLoader(
      this.plugin.audioContext,
      SamplerHTMLElement.URLs,
      this.shadowRoot,
      (bufferList) => {
        this.decodedSounds = bufferList;

        this.decodedSounds.forEach((decodedSound, index) => {
          if (decodedSound != undefined) {
            this.samplePlayers[index] = new SamplePlayer(
              this.plugin.audioContext,
              this.canvas,
              this.canvasOverlay,
              "orange",
              decodedSound,
              this.plugin.audioNode,
              0
            );
            if (currentState.samples[index].player) {
              SamplerHTMLElement.name[index] =
                currentState.samples[index].player.name;
              SamplerHTMLElement.defaultName[index] =
                currentState.samples[index].name;
              this.samplePlayers[index] =
                PresetManager.loadPlayerFromCurrentPreset(
                  this.samplePlayers[index],
                  index,
                  currentState
                );
            } else if (currentState) {
              SamplerHTMLElement.name[index] = currentState.samples[index].name;
            }
            this.setSwitchPad(index);
            this.setDefaultPadKeyValue(index);
            window.requestAnimationFrame(this.handleAnimationFrame);
          }
        });
        for (let i = 0; i < 16; i++) {
          const switchPad = this.shadowRoot.querySelector("#switchpad" + i);
          switchPad.midiController = {};
        }

        //bind the midi learn into the corresponding pad
        const switchPads = this.shadowRoot.querySelectorAll(".switchpad");
        if (currentState.midiLearn) {
          const switchPadsWithMidiLearn = currentState.midiLearn.filter(
            (element) => element.cc.cc
          );
          switchPads.forEach((switchpad) => {
            switchpad.midiController = {};
            if (
              switchPadsWithMidiLearn.find(
                (element) => element.id === switchpad.id
              )
            ) {
              switchpad.midiController.channel = currentState.midiLearn.find(
                (element) => element.id === switchpad.id
              ).cc.channel;
              switchpad.midiController.cc = currentState.midiLearn.find(
                (element) => element.id === switchpad.id
              ).cc.cc;

              this.setMidiNoteName(
                switchpad.id.match(/\d+/g)[0],
                switchpad.midiController.cc
              );

              localStorage.setItem(
                "WebAudioControlsMidiLearn",
                JSON.stringify(currentState.midiLearn)
              );
            }
          });
        }
      }
    );
    bl.load();
  }

  loadSounds = (presetValue, newDecodedSounds) => {
    SamplerHTMLElement.URLs = [];
    SamplerHTMLElement.name = [];
    SamplerHTMLElement.defaultName = [];
    // On remet toutes les progress bar à 0
    for (let i = 0; i < 16; i++) {
      const progressBar = this.shadowRoot.querySelector("#progress" + i);
      progressBar.value = 0;
    }

    if (localStorage.presets) {
      // if local storage has presets item, load the selected preset saved in local storage
      const currentPreset = PresetManager.getCurrentPreset(presetValue);

      if (currentPreset) {
        //get urls from current preset
        let currentPresetUrls = PresetManager.getPresetUrls(currentPreset);
        const currentPresetNames =
          PresetManager.getPresetUrlsNames(currentPreset);
        currentPresetUrls = changePathToAbsolute(currentPresetUrls);
        SamplerHTMLElement.URLs = currentPresetUrls;
        SamplerHTMLElement.defaultName = currentPresetNames;
      }
      let bl = new BufferLoader(
        this.plugin.audioContext,
        SamplerHTMLElement.URLs,
        this.shadowRoot,
        (bufferList) => {
          if (newDecodedSounds) {
            this.decodedSounds = newDecodedSounds;
          } else {
            this.decodedSounds = bufferList;
          }

          this.decodedSounds.forEach((decodedSound, index) => {
            if (decodedSound != undefined) {
              this.samplePlayers[index] = new SamplePlayer(
                this.plugin.audioContext,
                this.canvas,
                this.canvasOverlay,
                "orange",
                decodedSound,
                this.plugin.audioNode,
                0
              );
              if (currentPreset.samples[index].player) {
                SamplerHTMLElement.name[index] =
                  currentPreset.samples[index].player.name;
                SamplerHTMLElement.defaultName[index] =
                  currentPreset.samples[index].name;
                this.samplePlayers[index] =
                  PresetManager.loadPlayerFromCurrentPreset(
                    this.samplePlayers[index],
                    index,
                    currentPreset
                  );
                // this.samplePlayers[index].reversed = currentPreset.samples[index].player.reversed;
              } else if (currentPreset) {
                SamplerHTMLElement.name[index] =
                  currentPreset.samples[index].name;
              }
              this.setSwitchPad(index);
              this.setDefaultPadKeyValue(index);
              window.requestAnimationFrame(this.handleAnimationFrame);
            }
          });
          for (let i = 0; i < 16; i++) {
            const switchPad = this.shadowRoot.querySelector("#switchpad" + i);
            switchPad.midiController = {};
          }
          const switchPads = this.shadowRoot.querySelectorAll(".switchpad");
          //if current preset has midi learn, load midi learn from current preset, else load default midi mapping
          if (
            localStorage.presets &&
            PresetManager.getMidiLearnListFromCurrentPreset(currentPreset)
          ) {
            PresetManager.loadMidiControllerFromCurrentPreset(
              currentPreset,
              switchPads
            );
            switchPads.forEach((switchPad) => {
              const index = switchPad.id.match(/\d+/g)[0];
              const currentMidiLearn =
                PresetManager.getMidiLearnFromCurrentPreset(
                  currentPreset,
                  switchPad.id
                );
              if (currentMidiLearn.cc.cc === undefined) {
                if (switchPad.querySelector(".button_midi_note")) {
                  switchPad.querySelector(".button_midi_note").remove();
                }
              }
              this.setMidiNoteName(index, currentMidiLearn.cc.cc);
            });
          } else {
            this.defaultMidiMapping();
          }
        }
      );
      bl.load();
    }
    // if local Storage doesn't have presets item, load the selected preset from factory presets
    if (!localStorage.getItem("presets")) {
      if (presetValue.name) {
        presetValue = presetValue.name;
      }

      const currentPreset = PresetManager.getCurrentPreset(presetValue);
      SamplerHTMLElement.URLs = PresetManager.getPresetUrls(currentPreset);
      SamplerHTMLElement.URLs = changePathToAbsolute(SamplerHTMLElement.URLs);
      SamplerHTMLElement.name = PresetManager.getPresetUrlsNames(currentPreset);
      SamplerHTMLElement.defaultName = PresetManager.getPresetUrlsNames(
        PresetManager.getCurrentFactoryPreset(presetValue)
      );
      // on charge les sons par défaut
      let bl = new BufferLoader(
        this.plugin.audioContext,
        SamplerHTMLElement.URLs,
        this.shadowRoot,
        (bufferList) => {
          // on a chargé les sons, on stocke sous forme de tableau
          this.decodedSounds = bufferList;
          // Pour chaque son on créé un SamplePlayer
          this.decodedSounds.forEach((decodedSound, index) => {
            // Si bufferList est vide on passe au suivant
            if (decodedSound != undefined) {
              this.samplePlayers[index] = new SamplePlayer(
                this.plugin.audioContext,
                this.canvas,
                this.canvasOverlay,
                "orange",
                decodedSound,
                this.plugin.audioNode,
                0
              );
              this.setSwitchPad(index);
              this.setDefaultPadKeyValue(index);
              window.requestAnimationFrame(this.handleAnimationFrame);
            }
          });
          for (let i = 0; i < 16; i++) {
            const switchPad = this.shadowRoot.querySelector("#switchpad" + i);
            switchPad.midiController = {};
          }
          this.defaultMidiMapping();
        }
      );

      bl.load();
      if (!newDecodedSounds) this.defaultMidiMapping();
    }
    this.defaultMidiMapping();
    this.setDefaultPadsKeyValue();
  };

  promptUser = async () => {
    if (!this.shadowRoot.querySelector("html-prompt")) {
      const resultExplorerPads =
        this.shadowRoot.querySelectorAll(".resultExplorer");
      //hide all resultExplorerPads
      resultExplorerPads.forEach((resultExplorerPad) => {
        resultExplorerPad.style.display = "none";
      });

      let promptElement = document.createElement("html-prompt");
      this.shadowRoot.querySelector("#results").append(promptElement);

      //display explorer choice and hide the others
      const knob = this.shadowRoot.querySelector("#choiceKnobs");
      const explorer = this.shadowRoot.querySelector("#choiceExplorer");
      const MIDI = this.shadowRoot.querySelector("#choiceMIDI");

      const divKnob = this.shadowRoot.querySelector("#knobs");
      const divExplorer = this.shadowRoot.querySelector("#explorer");
      const divMIDI = this.shadowRoot.querySelector("#MIDI");

      explorer.classList.add("choose");

      divKnob.style.display = "none";
      divExplorer.style.display = "inline-block";
      divMIDI.style.display = "none";

      knob.classList.remove("choose");
      explorer.classList.add("choose");
      MIDI.classList.remove("choose");

      promptElement.addEventListener("focus", (e) => {
        console.log("focus");
        this.enableKeyboard = false;
      });
      promptElement.addEventListener("promptClosed", (e) => {
        this.enableKeyboard = true;
        this.shadowRoot.querySelector("#sampler").focus();
      });
      const response = await promptElement.showPrompt("Enter preset name!");

      resultExplorerPads.forEach((resultExplorerPad) => {
        resultExplorerPad.style.display = "inline-block";
      });
      return response;
    }
  };

  createNoteSet = () => {
    const noteSetBtn = this.shadowRoot.querySelector("#createNoteSet");
    const selectMenuScale = this.shadowRoot.querySelector("#selectNoteSet");
    const switchPads = this.shadowRoot.querySelectorAll(".switchpad");

    NoteSet.buildScaleMenu(selectMenuScale);

    if (!this.player || selectMenuScale.value === "") {
      noteSetBtn.disabled = true;
      noteSetBtn.classList.add("element-disabled");
    }
    selectMenuScale.onchange = () => {
      if (selectMenuScale.value === "") {
        noteSetBtn.disabled = true;
      } else {
        if (this.player) {
          noteSetBtn.disabled = false;
          noteSetBtn.classList.remove("element-disabled");
        }
      }
    };

    switchPads.forEach((switchPad) => {
      switchPad.onclick = () => {
        if (selectMenuScale.value !== "") {
          noteSetBtn.disabled = false;
          noteSetBtn.classList.remove("element-disabled");
        }
      };
    });

    noteSetBtn.onclick = async () => {
      if (!this.player) {
        return;
      }
      const currentPlayer = this.player;

      if (selectMenuScale.value === "") return;

      const switchPads = this.shadowRoot.querySelectorAll(".switchpad");
      let presetName;

      if (this.promptAvailable) {
        presetName = prompt("Preset name :");

        let stopExecution = false;

        if (presetName === "") {
          alert("Error : preset name can't be empty");
          stopExecution = true;
          return;
        }
        // if the preset name already exists, we ask the user if he wants to overwrite it
        else if (PresetManager.getCurrentPreset(presetName)) {
          // alert("Error : this preset name already exists");
          if (
            !confirm(
              "This preset name already exists. Do you want to overwrite it ?"
            )
          ) {
            stopExecution = true;
            return;
          } else {
            PresetManager.removePreset(presetName);
          }
        } else if (presetName === null) {
          // Si l'utilisateur annule la saisie
          stopExecution = true;
          return;
        }

        if (stopExecution) {
          return;
        }
      } else {
        const response = await this.promptUser();
        if (response === "" || !response) return;
        if (PresetManager.getCurrentPreset(response))
          PresetManager.removePreset(response);
        presetName = response;
      }

      //change the index of the player in the samplePlayers array
      const playerIndex = this.samplePlayers.indexOf(currentPlayer);

      this.swapSample(playerIndex, 7);
      const fundamentalIndex = 7;

      this.samplePlayers.forEach((player, index) => {
        if (player && player !== currentPlayer) {
          //clean samplePlayer
          this.deleteSample(index);
        }
      });

      let namePlayer = SamplerHTMLElement.name[fundamentalIndex];
      let rootNoteName;
      if (namePlayer.match(/(?:^|\s)([A-G][#b]?[0-9]?)(?=\s|$)/)) {
        rootNoteName = namePlayer.match(
          /(?:^|\s)([A-G][#b]?[0-9]?)(?=\s|$)/
        )[0];
        //delete space
        rootNoteName = rootNoteName.replace(/\s/g, "");
        //By default the octave is 4
        if (!rootNoteName.match(/[0-9]/)) {
          const octave = "4";
          SamplerHTMLElement.name[fundamentalIndex] =
            SamplerHTMLElement.name[fundamentalIndex] + octave;
        }
      } else {
        //By default the root note is C4
        rootNoteName = "C4";
        namePlayer = namePlayer + " " + rootNoteName;
        SamplerHTMLElement.name[fundamentalIndex] = namePlayer;
      }

      const scales = NoteSet.getScales();

      const currentScale = scales.find(
        (scale) => scale.name === selectMenuScale.value
      );
      if (!currentScale) return;

      const ascendingNotesSemitones = currentScale.notes.ascending.map(
        (note) => note.semitones
      );
      const descendingNotesSemitones = currentScale.notes.descending.map(
        (note) => note.semitones
      );

      const newNamesScale = NoteSet.changeScaleNoteName(
        ascendingNotesSemitones,
        descendingNotesSemitones,
        rootNoteName
      );
      this.setNoteValue(fundamentalIndex, newNamesScale.ascending[0]);

      //if the root player is pitched, we need to pitch the new players
      const newPlayer = new SamplePlayer(
        this.plugin.audioContext,
        this.canvas,
        this.canvasOverlay,
        "orange",
        currentPlayer.newDecodedSound,
        this.plugin.audioNode,
        currentPlayer.semitones
      );
      newPlayer.decodedSound = newPlayer.newDecodedSound;
      newPlayer.semitones = 0;
      this.setKnobsEffects();
      this.samplePlayers[fundamentalIndex] = newPlayer;
      this.samplePlayers[fundamentalIndex] = NoteSet.setEffectsSamplePlayer(
        this.samplePlayers[fundamentalIndex],
        currentPlayer
      );

      let indexAscending = 1;
      for (let i = fundamentalIndex + 1; i < switchPads.length; i++) {
        this.samplePlayers[i] = new SamplePlayer(
          this.plugin.audioContext,
          this.canvas,
          this.canvasOverlay,
          "orange",
          newPlayer.newDecodedSound,
          this.plugin.audioNode,
          0
        );
        SamplerHTMLElement.name[i] = namePlayer.replace(
          rootNoteName,
          newNamesScale.ascending[indexAscending]
        );
        SamplerHTMLElement.defaultName[i] =
          SamplerHTMLElement.defaultName[fundamentalIndex];
        SamplerHTMLElement.URLs[i] = SamplerHTMLElement.URLs[fundamentalIndex];

        this.samplePlayers[i] = NoteSet.setEffectsSamplePlayer(
          this.samplePlayers[i],
          currentPlayer
        );

        this.samplePlayers[i].semitones =
          ascendingNotesSemitones[indexAscending];
        this.setSwitchPad(i);
        this.setNoteValue(i, newNamesScale.ascending[indexAscending]);
        indexAscending++;
      }

      let indexDescending = 1;
      for (let i = fundamentalIndex - 1; i >= 0; i--) {
        this.samplePlayers[i] = new SamplePlayer(
          this.plugin.audioContext,
          this.canvas,
          this.canvasOverlay,
          "orange",
          newPlayer.newDecodedSound,
          this.plugin.audioNode,
          0
        );
        SamplerHTMLElement.name[i] = namePlayer.replace(
          rootNoteName,
          newNamesScale.descending[indexDescending]
        );
        SamplerHTMLElement.defaultName[i] =
          SamplerHTMLElement.defaultName[fundamentalIndex];
        SamplerHTMLElement.URLs[i] = SamplerHTMLElement.URLs[fundamentalIndex];

        this.samplePlayers[i] = NoteSet.setEffectsSamplePlayer(
          this.samplePlayers[i],
          currentPlayer
        );

        this.samplePlayers[i].semitones =
          descendingNotesSemitones[indexDescending];
        this.setSwitchPad(i);
        this.setNoteValue(i, newNamesScale.descending[indexDescending]);
        indexDescending++;
      }

      this.setDefaultPadsKeyValue();

      PresetManager.createPreset(
        presetName,
        "noteSet",
        this.samplePlayers,
        SamplerHTMLElement,
        switchPads
      );
      PresetManager.saveAllPresets();
      const presetSelectMenu = this.shadowRoot.querySelector("#selectPreset");
      PresetManager.buildPresetMenu(presetSelectMenu);

      const newDecodedSounds = [];
      this.samplePlayers.forEach((player, index) => {
        if (player) {
          newDecodedSounds[index] = player.decodedSound;
        }
      });
      this.loadCurrentPreset(presetName, newDecodedSounds);

      this.shadowRoot.querySelector("#selectPreset").value = presetName;
    };
  };

  createPreset = async (type, switchPads) => {
    this.initKnobs();
    let presetName;

    if (this.promptAvailable) {
      // Get the preset name
      presetName = prompt("Preset name :");

      //if the preset name is empty, we stop the execution
      if (presetName === "") {
        alert("Error : preset name can't be empty");
        return;
      }
      // If the preset name already exists, we ask the user if he wants to overwrite it
      else if (PresetManager.getCurrentPreset(presetName)) {
        // alert("Error : this preset name already exists");
        if (
          confirm(
            "This preset name already exists. Do you want to overwrite it ?"
          )
        ) {
          PresetManager.removePreset(presetName);
          PresetManager.createPreset(
            presetName,
            type,
            this.samplePlayers,
            SamplerHTMLElement,
            switchPads
          );
          PresetManager.saveAllPresets();
          return;
        } else return;
      } else if (presetName === null) {
        // If the user cancels the input
        return;
      } else {
        PresetManager.createPreset(
          presetName,
          type,
          this.samplePlayers,
          SamplerHTMLElement,
          switchPads
        );
        PresetManager.saveAllPresets();
      }
    } else {
      const response = await this.promptUser();
      if (response === "") return;
      if (PresetManager.getCurrentPreset(response))
        PresetManager.removePreset(response);
      presetName = response;
      PresetManager.createPreset(
        presetName,
        type,
        this.samplePlayers,
        SamplerHTMLElement,
        switchPads
      );
      PresetManager.saveAllPresets();
    }

    const presetSelectMenu = this.shadowRoot.querySelector("#selectPreset");
    PresetManager.buildPresetMenu(presetSelectMenu);

    this.loadCurrentPreset(presetName);
    this.shadowRoot.querySelector("#selectPreset").value = presetName;
  };

  savePreset = () => {
    this.initKnobs();
    const preset = this.shadowRoot.querySelector("#selectPreset");
    const presetName = preset.value;
    PresetManager.savePresets(
      presetName,
      this.samplePlayers,
      SamplerHTMLElement
    );

    this.loadCurrentPreset(presetName);
  };

  getCurrentState = (presetName, samplePlayers) => {
    this.plugin.audioNode.currentPreset = presetName;
    this.plugin.audioNode.gui = this;

    const currentState = structuredClone(
      PresetManager.getCurrentPreset(presetName)
    );
    // console.log(currentState);

    currentState.samples = PresetManager.newSamples(
      SamplerHTMLElement.URLs,
      SamplerHTMLElement.name,
      SamplerHTMLElement.defaultName,
      samplePlayers
    );
    currentState.midiLearn = PresetManager.getMidiPresetsFromLocalStorage();
    return currentState;
  };

  deletePreset = () => {
    this.initKnobs();
    this.stopAllSoundsPads();
    this.stopAllSoundsExplorer();
    const preset = this.shadowRoot.querySelector("#selectPreset").value;
    const presetSelectMenu = this.shadowRoot.querySelector("#selectPreset");
    const switchPads = this.shadowRoot.querySelectorAll(".switchpad");

    if (PresetManager.isFactoryPreset(preset)) {
      PresetManager.resetPreset(preset);
      this.loadCurrentPreset(preset);
    } else {
      PresetManager.removePreset(preset);
      PresetManager.resetAllMidiLearning();

      PresetManager.buildPresetMenu(presetSelectMenu);

      this.loadCurrentPreset(presetSelectMenu.value);
    }
  };

  noteOnKey = (padbutton) => {
    const numberRegex = /\d+/g;
    const padIndex = +padbutton.id.match(numberRegex)[0];

    //call setValue method from webaudio-controls to change the Gui when key is pressed
    if (padbutton.nodeName === "WEBAUDIO-SWITCH") padbutton.setValue(1);

    this.player = this.samplePlayers[padIndex];
    if (!this.player) return;

    this.shadowRoot.querySelector("#labelSampleName").innerHTML =
      padbutton.innerHTML.split("<")[0];

    this.setKnobsEffects();

    this.player.drawWaveform();

    this.player.stop();
    this.player.play();

    const buttons = this.shadowRoot.querySelectorAll(".switchpad");
    buttons.forEach((button) => {
      button.classList.remove("selected");
    });

    const buttonsExplorer = this.shadowRoot.querySelectorAll(".resultButton");
    buttonsExplorer.forEach((button) => {
      button.classList.remove("selected");
    });

    padbutton.classList.add("selected");

    this.setLabel(padIndex, padbutton);
  };

  noteOffKey = (padbutton) => {
    //call setValue method from webaudio-controls to change the Gui when key is up
    if (padbutton.nodeName === "WEBAUDIO-SWITCH") padbutton.setValue(0);

    const numberRegex = /\d+/g;
    const padIndex = +padbutton.id.match(numberRegex)[0];
    if (!padbutton) return;
    padbutton.classList.remove("active");
    this.player = this.samplePlayers[padIndex];
    if (!this.player) return;
    if (this.player.enableAdsr) {
      this.player.releaseEnv();
    }
  };

  setKeyboardPress() {
    const enableKeysBtn = this.shadowRoot.querySelector("#enableKeyboard");
    let localEnableKeyboard = false;
    enableKeysBtn.addEventListener("click", (e) => {
      if (localEnableKeyboard) {
        localEnableKeyboard = false;
        enableKeysBtn.textContent = "Keyboard OFF";
        enableKeysBtn.classList.remove("choose");
      } else {
        localEnableKeyboard = true;
        enableKeysBtn.textContent = "Keyboard ON";
        enableKeysBtn.classList.add("choose");
      }
    });
    this.shadowRoot.addEventListener("keydown", (e) => {
      if (!this.enableKeyboard || !localEnableKeyboard) return;
      //cancel the event if it's a repeat -> sample playing in loop
      if (e.repeat) {
        e.preventDefault();
        return;
      }
      switch (e.code) {
        case "Digit1":
          this.noteOnKey(this.shadowRoot.querySelector("#switchpad12"));
          break;
        case "Digit2":
          this.noteOnKey(this.shadowRoot.querySelector("#switchpad13"));
          break;
        case "Digit3":
          this.noteOnKey(this.shadowRoot.querySelector("#switchpad14"));
          break;
        case "Digit4":
          this.noteOnKey(this.shadowRoot.querySelector("#switchpad15"));
          break;
        case "KeyQ":
          this.noteOnKey(this.shadowRoot.querySelector("#switchpad8"));
          break;
        case "KeyW":
          this.noteOnKey(this.shadowRoot.querySelector("#switchpad9"));
          break;
        case "KeyE":
          this.noteOnKey(this.shadowRoot.querySelector("#switchpad10"));
          break;
        case "KeyR":
          this.noteOnKey(this.shadowRoot.querySelector("#switchpad11"));
          break;
        case "KeyA":
          this.noteOnKey(this.shadowRoot.querySelector("#switchpad4"));
          break;
        case "KeyS":
          this.noteOnKey(this.shadowRoot.querySelector("#switchpad5"));
          break;
        case "KeyD":
          this.noteOnKey(this.shadowRoot.querySelector("#switchpad6"));
          break;
        case "KeyF":
          this.noteOnKey(this.shadowRoot.querySelector("#switchpad7"));
          break;
        case "KeyZ":
          this.noteOnKey(this.shadowRoot.querySelector("#switchpad0"));
          break;
        case "KeyX":
          this.noteOnKey(this.shadowRoot.querySelector("#switchpad1"));
          break;
        case "KeyC":
          this.noteOnKey(this.shadowRoot.querySelector("#switchpad2"));
          break;
        case "KeyV":
          this.noteOnKey(this.shadowRoot.querySelector("#switchpad3"));
          break;
      }
    });

    this.shadowRoot.addEventListener("keyup", (e) => {
      switch (e.code) {
        case "Digit1":
          this.noteOffKey(this.shadowRoot.querySelector("#switchpad12"));
          break;
        case "Digit2":
          this.noteOffKey(this.shadowRoot.querySelector("#switchpad13"));
          break;
        case "Digit3":
          this.noteOffKey(this.shadowRoot.querySelector("#switchpad14"));
          break;
        case "Digit4":
          this.noteOffKey(this.shadowRoot.querySelector("#switchpad15"));
          break;
        case "KeyQ":
          this.noteOffKey(this.shadowRoot.querySelector("#switchpad8"));
          break;
        case "KeyW":
          this.noteOffKey(this.shadowRoot.querySelector("#switchpad9"));
          break;
        case "KeyE":
          this.noteOffKey(this.shadowRoot.querySelector("#switchpad10"));
          break;
        case "KeyR":
          this.noteOffKey(this.shadowRoot.querySelector("#switchpad11"));
          break;
        case "KeyA":
          this.noteOffKey(this.shadowRoot.querySelector("#switchpad4"));
          break;
        case "KeyS":
          this.noteOffKey(this.shadowRoot.querySelector("#switchpad5"));
          break;
        case "KeyD":
          this.noteOffKey(this.shadowRoot.querySelector("#switchpad6"));
          break;
        case "KeyF":
          this.noteOffKey(this.shadowRoot.querySelector("#switchpad7"));
          break;
        case "KeyZ":
          this.noteOffKey(this.shadowRoot.querySelector("#switchpad0"));
          break;
        case "KeyX":
          this.noteOffKey(this.shadowRoot.querySelector("#switchpad1"));
          break;
        case "KeyC":
          this.noteOffKey(this.shadowRoot.querySelector("#switchpad2"));
          break;
        case "KeyV":
          this.noteOffKey(this.shadowRoot.querySelector("#switchpad3"));
          break;
      }
    });
  }

  setVelocity() {
    const velocityBtn = this.shadowRoot.querySelector("#enableVelocity");
    velocityBtn.onclick = () => {
      if (!this.enableVelocity) {
        velocityBtn.classList.add("choose");
        velocityBtn.innerHTML = "Velocity ON";
        this.enableVelocity = true;
      } else {
        velocityBtn.classList.remove("choose");
        velocityBtn.innerHTML = "Velocity OFF";
        this.enableVelocity = false;
      }
    };
  }

  setupMidiListeners(audioNode) {
    console.log("setupMIDIEvents called at " + Date.now());
    const wamNode = audioNode._wamNode;
    wamNode.addEventListener("wam-midi", (e) =>
      this.processMIDIEvents([{ event: e.detail.data.bytes, time: 0 }])
    );
  }

  processMIDIEvents(midiEvents, enableVelocity) {
    // console.log("processMIDIEvents called at " + Date.now());
    // console.log("midiEvents:", midiEvents);

    midiEvents.forEach((message) => {
      if (message.event[0] === MIDI.NOTE_ON && message.event[2] !== 0) {
        let midiNote = message.event[1];
        let velocity = message.event[2];
        this.updateMidiNoteValue(midiNote);
        this.noteOn(midiNote, message.time, velocity);
        //if midi controller has no noteOff
        // if (velocity > 0) this.noteOn(midiNote, message.time)
        // else this.noteOff(midiNote, message.time)
      } else if (
        message.event[0] === MIDI.NOTE_OFF ||
        (message.event[0] === MIDI.NOTE_ON && message.event[2] === 0)
      ) {
        // NOTE_ON avec velocity 0 = NOTE_OFF
        let midiNote = message.event[1];
        this.noteOff(midiNote, message.time);
      } else if (
        message.event[0] >= MIDI.CC &&
        message.event[0] < MIDI.CC + 16
      ) {
        let controlId = message.event[0];
        let ccValue = message.event[2];
        this.controlChange(controlId, ccValue);
      }
    });
  }

  controlChange(controlId, ccValue) {
    if (!this.player) return;
    const samplePlayer = this.player;
    // console.log("controlChange", controlId, ccValue)

    if (controlId == this.controlBindings.get("volume")) {
      samplePlayer.effects.volumeGain = parseFloat(ccValue / 127);
      this.shadowRoot.querySelector("#knob1").value = parseFloat(ccValue / 127);
    }
    if (controlId == this.controlBindings.get("pan")) {
      samplePlayer.effects.pan = parseFloat((ccValue / 127) * 2 - 1);
      this.shadowRoot.querySelector("#knob2").value = parseFloat(
        (ccValue / 127) * 2 - 1
      );
    }

    if (controlId == this.controlBindings.get("tone")) {
      samplePlayer.effects.tone = parseFloat((ccValue / 127) * 2 - 1);
      this.shadowRoot.querySelector("#knob3").value = parseFloat(
        (ccValue / 127) * 2 - 1
      );
    }

    if (controlId == this.controlBindings.get("pitch")) {
      samplePlayer.semitones = parseInt(((ccValue / 127) * 2 - 1) * 24);
      this.shadowRoot.querySelector("#knobPitch").value = parseInt(
        ((ccValue / 127) * 2 - 1) * 24
      );
    }

    //adsr
    if (controlId == this.controlBindings.get("attack")) {
      samplePlayer.effects.attackValue = parseFloat((ccValue / 127) * 2);
      this.shadowRoot.querySelector("#knobAttack").value =
        parseFloat(ccValue / 127) * 2;
    }

    if (controlId == this.controlBindings.get("decay")) {
      samplePlayer.effects.decayValue = parseFloat(ccValue / 127);
      this.shadowRoot.querySelector("#knobDecay").value = parseFloat(
        ccValue / 127
      );
    }

    if (controlId == this.controlBindings.get("sustain")) {
      samplePlayer.effects.sustainValue = parseFloat(ccValue / 127);
      this.shadowRoot.querySelector("#knobSustain").value = parseFloat(
        ccValue / 127
      );
    }

    if (controlId == this.controlBindings.get("release")) {
      samplePlayer.effects.releaseValue = parseFloat((ccValue / 127) * 2);
      this.shadowRoot.querySelector("#knobRelease").value =
        parseFloat(ccValue / 127) * 2;
    }
  }

  noteOn(note, tickStartTime, velocity) {
    // console.log("noteOn", note, tickStartTime)
    const presetValue = this.shadowRoot.querySelector("#selectPreset").value;

    let currentPad;
    let padIndex;

    const numberRegex = /\d+/g;

    if (localStorage.getItem("WebAudioControlsMidiLearn")) {
      //get current midi learn binding from local storage
      let stockMidiLearn = localStorage.getItem("WebAudioControlsMidiLearn");
      let listMidiLearn = JSON.parse(stockMidiLearn);

      // get the pad corresponding to the note passed in parameter
      currentPad = listMidiLearn.find((pad) => pad.cc.cc === note);

      if (!currentPad) return;

      padIndex = +currentPad.id.match(numberRegex)[0];
      this.setMidiNoteName(padIndex, note);
    }

    //if local storage is empty
    else {
      const switchpads = this.shadowRoot.querySelectorAll("webaudio-switch");
      switchpads.forEach((pad) => {
        if (pad.midiController.cc === note) {
          currentPad = pad;
        }
      });
      if (currentPad === undefined) return;
      // filter the number in the id of the pad
      padIndex = +currentPad.id.match(numberRegex)[0];
    }

    const padbutton = this.shadowRoot.querySelector("#switchpad" + padIndex);
    if (padbutton.nodeName === "WEBAUDIO-SWITCH") padbutton.value = 1;

    this.player = this.samplePlayers[padIndex];

    // if the player doesn't exist, we stop the function
    if (!this.player) return;

    //Display the current pad name over the waveform
    const currentSwitchPad = this.shadowRoot.querySelector(
      "#switchpad" + padIndex
    );

    // console.log(currentSwitchPad.midiController);

    const switchPadName = currentSwitchPad.querySelector("p").innerHTML;
    this.shadowRoot.querySelector("#labelSampleName").innerHTML = switchPadName;

    this.setKnobsEffects();

    //if velocity is On
    if (this.enableVelocity) {
      //set velocity to volumeGain
      this.player.effects.volumeGain = parseFloat(velocity / 127);
      this.shadowRoot.querySelector("#knob1").value = parseFloat(
        velocity / 127
      );
    } else {
      this.shadowRoot.querySelector("#knob1").value = 0.5;
    }

    this.player.drawWaveform();

    this.player.stop();
    this.player.play();

    //remove selected class from all switchpads
    const switchPads = this.shadowRoot.querySelectorAll(".switchpad");
    switchPads.forEach((switchPad) => {
      switchPad.classList.remove("selected");
    });

    //add selected class to the current switchpad played
    currentSwitchPad.classList.add("selected");

    // On enleve la class .selected de tous les button de l'explorer
    const buttonsExplorer = this.shadowRoot.querySelectorAll(".resultButton");
    buttonsExplorer.forEach((button) => {
      button.classList.remove("selected");
    });

    //now we can rename the pad
    this.setLabel(padIndex, currentSwitchPad);
  }

  noteOff(note, tickStartTime) {
    if (!localStorage.getItem("WebAudioControlsMidiLearn")) return;
    //get current midi learn binding from local storage
    let stockMidiLearn = localStorage.getItem("WebAudioControlsMidiLearn");
    let listMidiLearn = JSON.parse(stockMidiLearn);

    // get the pad corresponding to the note passed in parameter
    let currentPad = listMidiLearn.find((pad) => pad.cc.cc === note);

    if (!currentPad) return;

    // filter the number in the id of the pad
    const numberRegex = /\d+/g;
    const padIndex = +currentPad.id.match(numberRegex)[0];

    const padbutton = this.shadowRoot.querySelector("#switchpad" + padIndex);
    if (padbutton.nodeName === "WEBAUDIO-SWITCH") padbutton.value = 0;

    if (!this.shadowRoot.querySelector("#switchpad" + padIndex)) return;
    this.shadowRoot
      .querySelector("#switchpad" + padIndex)
      .classList.remove("active");
    this.player = this.samplePlayers[padIndex];
    if (!this.player || !this.player.enableAdsr) {
      return;
    }
    if (this.player.enableAdsr) this.player.releaseEnv();
  }

  // name of the custom HTML element associated
  // with the plugin. Will appear in the DOM if
  // the plugin is visible
  static is() {
    return "sampler-html-element-without-builder";
  }
}

if (!customElements.get(SamplerHTMLElement.is())) {
  customElements.define(SamplerHTMLElement.is(), SamplerHTMLElement);
}
